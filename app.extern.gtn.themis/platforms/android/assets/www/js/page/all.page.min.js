var page_activate_account={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(d){app.debug.alert("page_"+this.config.name+".creator()",10);app.template.overwrite("#"+d.attr("id"),"JQueryMobilePlainPage");$.each(app.detect.classes.array(),function(a,b){if(!$("body").hasClass(a)){$("body").addClass(a)}});var c=d.find("div[data-role=content]");c.append(app.ni.element.h1({text:app.lang.string("activate_account","headlines")}));c.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("lost_password","actions"),attributes:{href:"lostPassword.html","data-transition":"slideup"}}),classes:["app-subtext2"]}));c.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("login","actions"),attributes:{href:"login.html","data-transition":"slideup"}}),classes:["app-subtext1"]}))},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10)},functions:{},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12)}}};var config_activate_account={name:"activate_account",shortname:"activate_account",template:"",useKeepAlive:true,loginObligate:false,isGlobalPage:false,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_backup_edit={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(h){app.debug.alert("page_"+this.config.name+".creator()",10);try{var i=h.find("div[data-role=header]");var k=h.find("div[data-role=content]");var g=h.find("div#nav-panel");app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var j=app.rc.getJson("getBackupjob",{jobId:app.store.localStorage.get("data-html5-themis-backupid"),expandUser:false,expandToken:false,expandProfiles:false,expandProtocol:false},true);j.done(function(a){k.append(app.ni.element.h1({text:app.lang.string("backup_edit","headlines")+" - "+a.jobTitle}));k.append(app.ni.element.h2({text:app.lang.string("backup_job_status","headlines")}));k.append(app.ni.element.p({text:a.jobStatus}));k.append(app.ni.element.h2({text:app.lang.string("backup_hold","headlines")}));k.append(app.ni.element.p({text:a.onHold}));k.append(app.ni.element.h2({text:app.lang.string("backup_schedule","headlines")}));k.append(app.ni.element.p({text:a.schedule}));k.append(app.ni.element.h2({text:app.lang.string("backup_created","headlines")}));k.append(app.ni.element.p({text:date("F j, Y, g:i a",a.created/1000)}));k.append(app.ni.element.h2({text:app.lang.string("backup_modified","headlines")}));k.append(app.ni.element.p({text:date("F j, Y, g:i a",a.modified/1000)}));k.append(app.ni.element.h2({text:app.lang.string("backup_start","headlines")}));k.append(app.ni.element.p({text:date("F j, Y, g:i a",a.start/1000)}));k.append(app.ni.element.h2({text:app.lang.string("backup_next","headlines")}));k.append(app.ni.element.p({text:date("F j, Y, g:i a",a.next/1000)}));k.append(app.ni.element.h2({text:app.lang.string("backup_delay","headlines")}));k.append(app.ni.element.p({text:a.delay}));k.append(app.ni.element.a({id:"btnNewBackup",text:app.lang.string("backup_log","actions"),attributes:{href:"backup_log.html"},classes:["ui-btn"]}));app.notify.loader.remove();app.help.jQM.enhance(k)});success=true}catch(l){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(l,null,4),50);app.debug.log(JSON.stringify(l,null,4));success=false}return success},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10)},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_backup_edit={name:"backup_edit",shortname:"backup_edit",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_backup_jobs={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(h){app.debug.alert("page_"+this.config.name+".creator()",10);app.debug.alert("page_"+this.config.name+".creator()",10);var i=$("div[data-role=header]");var l=$("div[data-role=content]");var g=$("div#nav-panel");var j=$("div#page-panel");app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var k=app.rc.getJson([["getBackupjobsActive",{expand:"true"}],["getBackupjobsPaused",{expand:"true"}],["getBackupjobsCreated",{expand:"true"}],["getBackupjobsNeedUserInteraction",{expand:"true"}]],true,3);k.done(function(b){var f=b.getBackupjobsActive,a=b.getBackupjobsNeedUserInteraction,e=b.getBackupjobsPaused,d=b.getBackupjobsCreated;l.append(app.ni.element.h1({text:app.lang.string("backup_jobs","headlines")}));l.append(app.ni.element.a({id:"btnNewBackup",text:app.lang.string("create_backup","actions"),attributes:{href:"create_backup_1.html"},classes:["ui-btn","ui-btn-inline"]}));l.append(app.ni.element.a({id:"btnShareAll",text:app.lang.string("share all","page.backup_jobs"),classes:["ui-btn","ui-btn-inline"]}));l.append(app.ni.element.a({id:"btnShareAllFromNow",text:app.lang.string("share all from now","page.backup_jobs"),classes:["ui-btn","ui-btn-inline"]}));l.append(app.ni.element.h2({text:app.lang.string("paused backup jobs","headlines"),styles:{clear:"both"}}));var c=$(app.template.get("listA","responsive"));$.each(e,function(o,p){c.append(app.ni.list.thumbnail({href:"#",imageSrc:app.img.getUrlById("job_"+p.status),title:p.jobStatus,headline:p.jobTitle,text:"",classes:["job"],attributes:{"data-html5-themis-backupid":p.jobId,"data-html5-themis-backuptitle":p.jobTitle}}))});app.notify.loader.remove();l.append(c);l.append(app.ni.element.h2({text:app.lang.string("created backup jobs","headlines"),styles:{clear:"both"}}));c=$(app.template.get("listA","responsive"));$.each(d,function(o,p){c.append(app.ni.list.thumbnail({href:"#",imageSrc:app.img.getUrlById("job_"+p.status),title:"Id: "+p.jobId,headline:p.jobTitle,text:p.jobTitle,classes:["job"],attributes:{"data-html5-themis-backupid":p.jobId,"data-html5-themis-backuptitle":p.jobTitle}}))});l.append(c);l.append(app.ni.element.h2({text:app.lang.string("active backup jobs","headlines"),styles:{clear:"both"}}));c=$(app.template.get("listA","responsive"));$.each(f,function(o,p){c.append(app.ni.list.thumbnail({href:"#",imageSrc:app.img.getUrlById("job_"+p.status),title:"Id: "+p.jobId,headline:p.jobTitle,text:p.jobTitle,classes:["job"],attributes:{"data-html5-themis-backupid":p.jobId,"data-html5-themis-backuptitle":p.jobTitle}}))});l.append(c);l.append(app.ni.element.h2({text:app.lang.string("need user interaction","headlines"),styles:{clear:"both"}}));c=$(app.template.get("listA","responsive"));$.each(a,function(o,p){c.append(app.ni.list.thumbnail({href:"#",imageSrc:app.img.getUrlById("job_"+p.status),title:"Id: "+p.jobId,headline:p.jobTitle,text:p.jobTitle,classes:["job"],attributes:{"data-html5-themis-backupid":p.jobId,"data-html5-themis-backuptitle":p.jobTitle}}))});l.append(c);app.notify.loader.remove();app.help.jQM.enhance(l)});k.fail(function(a){app.notify.loader.remove();alert("ws error: "+a)})},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(page_backup_jobs.config.pageId).on("click",".job",function(a){var d=$(this).attr("data-html5-themis-backuptitle");app.notify.alert(page_backup_jobs.functions.getAlertContent(),d,false,app.lang.string("backup job alert - go back","page.backup_jobs"),false,10)});$(page_backup_jobs.config.pageId).on("click","#btnBackupjobDetails",function(a){app.nav.redirect("backup_edit.html","none")});$(page_backup_jobs.config.pageId).on("click","#btnSharBackupjob",function(a){var d=app.store.localStorage.get("data-html5-themis-backuptitle");app.notify.close.all().done(function(){app.notify.dialog(page_search.singleResult.getSharingInputs(),d,false,app.lang.string("share backup","page.backup_jobs"),app.lang.string("don't share item","page.backup_jobs"),function(){var g,c,h;if($("#selFriend option:selected").hasClass("friend")){alert("friend");g="shareBackup"}else{if($("#selFriend option:selected").hasClass("heritage")){g="shareBackupHeritage"}}c=($("#txtStartDate").val())?parseFloat(moment($("#txtStartDate").val()).format("x")):null;h=($("#txtEndDate").val())?parseFloat(moment($("#txtEndDate").val()).format("x")):null;app.rc.getJson(g,{withUserId:parseInt($("#selFriend option:selected").val()),name:$("#txtShareName").val(),policyValue:app.store.localStorage.get("data-html5-themis-backupid"),description:$("#txtShareDescription").val(),lifespanstart:c,lifespanend:h},true).done(function(){alert("done")}).fail(function(){alert("fail")})},function(){},50)})});$(page_backup_jobs.config.pageId).on("click","#btnShareAllFromNow",function(a){app.notify.close.all().done(function(){app.notify.dialog(page_search.singleResult.getSharingInputs(),app.lang.string("share all from now","page.backup_jobs"),false,app.lang.string("share backup","page.backup_jobs"),app.lang.string("don't share item","page.backup_jobs"),function(){var d;if($("#selFriend option:selected").hasClass("friend")){d="shareAllFromNow"}else{if($("#selFriend option:selected").hasClass("heritage")){d="shareAllFromNowHeritage"}}app.rc.getJson(d,{withUserId:parseInt($("#selFriend option:selected").val()),name:$("#txtShareName").val(),policyValue:"",description:$("#txtShareDescription").val()},true).done(function(){alert("done")}).fail(function(){alert("fail")})},function(){},50)})});$(page_backup_jobs.config.pageId).on("click","#btnShareAll",function(a){app.notify.close.all().done(function(){app.notify.dialog(page_search.singleResult.getSharingInputs(),app.lang.string("share all from now","page.backup_jobs"),false,app.lang.string("share backup","page.backup_jobs"),app.lang.string("don't share item","page.backup_jobs"),function(){var g,f,h;if($("#selFriend option:selected").hasClass("friend")){g="shareAll"}else{if($("#selFriend option:selected").hasClass("heritage")){g="shareAllHeritage"}}f=($("#txtStartDate").val())?parseFloat(moment($("#txtStartDate").val()).format("x")):null;h=($("#txtEndDate").val())?parseFloat(moment($("#txtEndDate").val()).format("x")):null;app.rc.getJson(g,{withUserId:parseInt($("#selFriend option:selected").val()),name:$("#txtShareName").val(),policyValue:"",description:$("#txtShareDescription").val(),lifespanstart:f,lifespanend:h},true).done(function(){alert("done")}).fail(function(){alert("fail")})},function(){},50)})})},functions:{getAlertContent:function(){var b=app.ni.element.div({classes:["job-alert-div"]});b.append(app.ni.element.a({id:"btnBackupjobDetails",text:app.lang.string("backupjob details","page.backup_jobs"),classes:["ui-btn","ui-btn-inline"]}));b.append(app.ni.element.a({id:"btnSharBackupjob",text:app.lang.string("share backupjob","page.backup_jobs"),classes:["ui-btn","ui-btn-inline"]}));return b}},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12)}}};var config_backup_jobs={name:"backup_jobs",shortname:"backup_jobs",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:true,contentRefreshInterval:30000,asyncLoading:false};var page_backup_log={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(h){app.debug.alert("page_"+this.config.name+".creator()",10);try{app.debug.alert("page_"+this.config.name+".creator()",10);var i=h.find("div[data-role=header]");var k=h.find("div[data-role=content]");var g=h.find("div#nav-panel");app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var j=app.rc.getJson("getBackupjob",{jobId:app.store.localStorage.get("data-html5-themis-backupid"),expandUser:false,expandToken:false,expandProfiles:false,expandProtocol:true},true);j.done(function(a){k.append(app.ni.element.h1({text:app.lang.string("backup_log","headlines")}));k.append(app.ni.element.a({id:"btnBackupDetails",text:app.lang.string("backup_edit","actions"),attributes:{href:"backup_edit.html"},classes:["ui-btn"]}));app.notify.loader.remove();app.help.jQM.enhance(k)});j.fail(function(a){app.notify.loader.remove();alert("ws error: "+a)});success=true;success=true}catch(l){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(l,null,4),50);app.debug.log(JSON.stringify(l,null,4));success=false}return success},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10)},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_backup_log={name:"backup_log",shortname:"backup_log",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_badConnection={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(d){app.debug.alert("page_"+this.config.name+".creator()",10);app.template.overwrite("#"+d.attr("id"),"JQueryMobilePlainPage");$.each(app.detect.classes.array(),function(a,b){if(!$("body").hasClass(a)){$("body").addClass(a)}});var c=d.find("div[data-role=content]");c.append(app.ni.element.h1({text:"Bad Connection"}));c.append(app.ni.element.p({text:"Check your internet connection. You will be redirected after your connection is back again."}))},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(this.config.pageId).on("connectionisalive",function(a){app.help.navigation.back()})},functions:{},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12)}}};var config_badConnection={name:"badConnection",shortname:"badConnection",template:"",useKeepAlive:false,loginObligate:false,isGlobalPage:false,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_create_backup_1={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(h){app.debug.alert("page_"+this.config.name+".creator()",10);var i=$("div[data-role=header]");var l=$("div[data-role=content]");var g=$("div#nav-panel");var j=$("div#page-panel");app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var k=app.rc.getJson("getSources",{expandConfigs:false},true);k.done(function(a){l.append(app.ni.element.h1({text:app.lang.string("headline","page.create_backup_1"),styles:{clear:"both"}}));l.append(app.ni.element.p({text:app.lang.string("description","page.create_backup_1")}));var b=$(app.template.get("listA","responsive"));$.each(a,function(e,c){var p=null,f=null,o=c.pluginId,d=null;if(c.authDataDescription!=undefined){p=true;f=c.authDataDescription.configType;if(f=="oauth"){d=c.authDataDescription.redirectURL;app.sess.setObject(o,c.authDataDescription.properties,"session_CreateSource")}}else{p=false}b.append(app.ni.list.thumbnail({href:"#",imageSrc:app.img.getUrlById("source_"+o),title:"",headline:c.title,text:c.description,classes:["source","authRequired-"+p],attributes:{"data-html5-authRequired":p,"data-html5-oAuthUrl":d,"data-html5-pluginId":o,"data-html5-source-pluginId":o,"data-html5-authType":f,"data-html5-destinationType":"source"}}))});l.append(b);app.notify.loader.remove();app.help.jQM.enhance(l)});k.fail(function(a){alert("ws error")})},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(page_create_backup_1.config.pageId).on("click",".authRequired-false",function(a){app.help.navigation.redirect("create_backup_1_newSource.html","slide")});$(page_create_backup_1.config.pageId).on("click",".authRequired-true",function(f){var a=$(this).clone(),e;e=app.rc.getJson("getAuthdataForPlugin",{pluginId:a.attr("data-html5-pluginId")},true);e.fail(function(){alert("ws error")});e.done(function(c){authDataList=app.ni.element.ul({attributes:{"data-role":"listview","data-inset":"true"}});$.each(c,function(d,h){authDataList.append(app.ni.element.li({text:app.ni.element.a({text:h.name,attributes:{href:"create_backup_1_newSource.html","data-transition":"slide","data-html5-authdataId":h.id,"data-html5-authdataName":h.name},classes:[]})}))});app.notify.dialog(authDataList,app.lang.string("choose_profile","headlines"),false,app.lang.string("new_source_profile","actions"),app.lang.string("cancel","actions"),function(d){window.setTimeout(function(){switch(a.attr("data-html5-authType")){case"oauth":var j=a.attr("data-html5-oAuthUrl");var i=null;i=app.oa.generic(j);i.done(function(g){app.store.localStorage.set("data-html5-oAuthQuery",g);app.help.navigation.redirect("create_backup_1_oAuthFinished.html","slide")});i.fail(function(g){alert("oAuth error: "+g)});break;case"input":app.help.navigation.redirect("create_backup_1_inputAuth.html","slide");break;default:alert("not implemented")}},10)},function(d){},100)})})},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_create_backup_1={name:"create_backup_1",shortname:"create_backup_1",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_create_backup_1_inputAuth={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(h){app.debug.alert("page_"+this.config.name+".creator()",10);var i=$("div[data-role=header]");var l=$("div[data-role=content]");var g=$("div#nav-panel");var j=$("div#page-panel");app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var k=app.rc.getJson("getPlugin",{pluginId:app.store.localStorage.get("data-html5-pluginId"),expandConfigs:true},true);k.done(function(a){l.append(app.ni.element.h1({text:app.lang.string("headline","page.create_backup_1_inputAuth"),styles:{clear:"both"}}));l.append(app.ni.element.p({text:app.lang.string("description","page.create_backup_1_inputAuth")}));var b=app.ni.form.form({id:"frmCreateSource",attributes:{action:"#","data-ajax":"false"}});b.append(app.ni.text.text({id:"txtName",name:"title",placeholder:app.lang.string("title","labels"),label:true,labelText:app.lang.string("title","labels"),container:true,attributes:{value:app.lang.string("new authentication","page.create_backup")+": "+app.store.localStorage.get("data-html5-pluginId")}}));if(a.authDataDescription!=undefined){$.each(a.authDataDescription.requiredInputs,function(d,c){b.append(app.bmu.print.formElement(c,a.pluginId))})}b.append(app.ni.button.button({id:"btnAuthenticate",name:"btnAuthenticate",placeholder:app.lang.string("create_authdata","labels"),label:false,labelText:app.lang.string("create_authdata","labels"),container:false,value:app.lang.string("create_authdata","actions")}));l.append(b);app.notify.loader.remove();app.help.jQM.enhance(l)});k.fail(function(a){alert("ws error")})},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(page_create_backup_1_inputAuth.config.pageId).on("click","#btnAuthenticate",function(a){app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var e=app.help.form.serialize($("#frmCreateSource")),f;delete e.btnAuthenticate;delete e.title;f=app.rc.getJson("createAuthdata",{pluginId:app.store.localStorage.get("data-html5-pluginId"),name:b.find("#txtName").val(),properties:e},true);f.done(function(c){app.store.localStorage.set("data-html5-authdataId",c.id);app.store.localStorage.set("data-html5-authdataName",c.name);app.notify.loader.remove();app.help.navigation.redirect("create_backup_1_newSource.html","slide")});f.fail(function(){alert(" WS Error")})})},functions:{},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12)}}};var config_create_backup_1_inputAuth={name:"create_backup_1_inputAuth",shortname:"create_backup_1_inputAuth",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_create_backup_1_newSource={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(j){app.debug.alert("page_"+this.config.name+".creator()",10);var k=$("div[data-role=header]");var p=$("div[data-role=content]");var i=$("div#nav-panel");var l=$("div#page-panel");app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var m,n=null,o=null;if(app.store.localStorage.get("data-html5-authrequired")){m=app.rc.getJson("getPluginOptions",{pluginId:app.store.localStorage.get("data-html5-pluginId"),authData:app.store.localStorage.get("data-html5-authdataId"),expandConfigs:true},true)}else{m=app.rc.getJson("getPlugin",{pluginId:app.store.localStorage.get("data-html5-pluginId"),expandConfigs:true},true)}m.done(function(a){p.append(app.ni.element.h1({text:app.lang.string("headline","page.create_backup_1_newSource"),styles:{clear:"both"}}));p.append(app.ni.element.p({text:app.lang.string("description","page.create_backup_1_newSource")}));var b=app.ni.form.form({id:"frmCreateSource",attributes:{action:"#","data-ajax":"false"},label:false});if(a.propertiesDescription!=undefined){if(a.propertiesDescription.length>0){$.each(a.propertiesDescription,function(e,d){b.append(app.bmu.print.formElement(d,a.pluginId))});o=true}else{o=false}}if(a.availableOptions!=undefined){if(a.availableOptions.length>0){var c=$(app.ni.select.multiple({id:"cboOptions",name:"options",label:true,labelText:app.lang.string("selectOptionsLabel","page.create_backup_1_newSource"),attributes:{"data-native-menu":false}}));c.append(app.ni.select.option({text:app.lang.string("selectOptions","page.create_backup_1_newSource")}));$.each(a.availableOptions,function(e,d){c.append(app.ni.select.option({text:d,attributes:{value:d}}))});b.append(c);n=true}else{n=false}}b.append(app.ni.button.button({id:"btnCreate",name:"btnCreate",placeholder:app.lang.string("create_source","labels"),label:true,labelText:app.lang.string("create_source","labels"),container:true,value:app.lang.string("create_source","actions")}));if(o||n){p.append(b);app.notify.loader.remove();app.help.jQM.enhance(p)}else{page_create_backup_1_newSource.createSinkProfile([],{})}});m.fail(function(a){alert("ws error")})},createSinkProfile:function(d,c){if(app.store.localStorage.get("data-html5-authRequired")){promise=app.rc.getJson("createSourceProfile",{pluginId:app.store.localStorage.get("data-html5-pluginId"),authData:{id:app.store.localStorage.get("data-html5-authdataId")},properties:c,options:d},true)}else{promise=app.rc.getJson("createSourceProfile",{pluginId:app.store.localStorage.get("data-html5-pluginId"),properties:c,options:d},true)}promise.done(function(a){app.store.localStorage.set("data-html5-themis-source-profileid",a.profileId);app.notify.loader.remove();app.help.navigation.redirect("create_backup_2.html","slide")});promise.fail(function(){alert("Quelle nicht angelegt. WS Error")})},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(page_create_backup_1_newSource.config.pageId).on("click","#btnCreate",function(){app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var e=app.help.form.serialize($("#frmCreateSource")),f,a=Array();delete e.btnCreate;if(e.options!=undefined){a=e.options;delete e.options}page_create_backup_1_newSource.createSinkProfile(a,e)})},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_create_backup_1_newSource={name:"create_backup_1_newSource",shortname:"create_backup_1_newSource",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_create_backup_1_oAuthFinished={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(h){app.debug.alert("page_"+this.config.name+".creator()",10);var i=$("div[data-role=header]");var l=$("div[data-role=content]");var e=$("div#nav-panel");var j=$("div#page-panel");if(app.config.apacheCordova===true){console.log("todo");app.store.localStorage.set("data-html5-oAuthQuery",app.store.localStorage.get("data-html5-oAuthQuery").split("&")[0])}else{try{app.store.localStorage.set("data-html5-oAuthQuery",window.location.href.split("?")[1].split("&")[0])}catch(k){app.store.localStorage.set("data-html5-oAuthQuery","")}}l.append(app.ni.element.h1({text:app.lang.string("headline","page.create_backup_1_oAuthFinished"),styles:{clear:"both"}}));l.append(app.ni.element.p({text:app.lang.string("description","page.create_backup_1_oAuthFinished")}));l.append(app.ni.text.text({id:"txtName",placeholder:app.lang.string("authdata_name","labels"),label:true,labelText:app.lang.string("authdata_name","labels"),container:true,attributes:{value:app.lang.string("new authentication","page.create_backup")+": "+app.store.localStorage.get("data-html5-pluginId")}}));l.append(app.ni.button.button({id:"btnCreateAuthData",placeholder:app.lang.string("create_authdata","labels"),label:true,labelText:app.lang.string("create_authdata","labels"),container:true,value:app.lang.string("create_authdata","actions")}))},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(page_create_backup_1_oAuthFinished.config.pageId).on("click","#btnCreateAuthData",function(i){var j,h,g;j={oAuthQuery:app.store.localStorage.get("data-html5-oAuthQuery")};h=app.sess.getObject(app.store.localStorage.get("data-html5-pluginId"),"session_CreateSource");for(var a in h){j[a]=h[a]}g=app.rc.getJson("createAuthdata",{pluginId:app.store.localStorage.get("data-html5-pluginId"),name:$("#txtName").val(),properties:j},true);g.done(function(c){app.store.localStorage.set("data-html5-authdataId",c.id);app.help.navigation.redirect("create_backup_1_newSource.html","slide")});g.fail(function(c){alert("ws error")})})},functions:{},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12)}}};var config_create_backup_1_oAuthFinished={name:"create_backup_1_oAuthFinished",shortname:"create_backup_1_oAuthFinished",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_create_backup_2={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(h){app.debug.alert("page_"+this.config.name+".creator()",10);var i=$("div[data-role=header]");var l=$("div[data-role=content]");var g=$("div#nav-panel");var j=$("div#page-panel");app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var k=app.rc.getJson("getSinks",{expandConfigs:true},true);k.done(function(a){l.append(app.ni.element.h1({text:app.lang.string("headline","page.create_backup_2"),styles:{clear:"both"}}));l.append(app.ni.element.p({text:app.lang.string("description","page.create_backup_2")}));var b=$(app.template.get("listA","responsive"));$.each(a,function(e,c){var p=null,f=null,o=c.pluginId,d=null;if(c.authDataDescription!=undefined){p=true;f=c.authDataDescription.configType;if(f=="oauth"){d=c.authDataDescription.redirectURL;app.sess.setObject(o,c.authDataDescription.properties,"session_CreateSink")}}else{p=false}b.append(app.ni.list.thumbnail({href:"#",imageSrc:app.img.getUrlById("sink_"+o),title:"",headline:c.title,text:c.description,classes:["source","authRequired-"+p],attributes:{"data-html5-authRequired":p,"data-html5-oAuthUrl":d,"data-html5-pluginId":o,"data-html5-sink-pluginId":o,"data-html5-authType":f,"data-html5-destinationType":"sink"}}))});l.append(b);app.notify.loader.remove();app.help.jQM.enhance(l)});success=true},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(page_create_backup_2.config.pageId).on("click",".authRequired-false",function(a){app.help.navigation.redirect("create_backup_1_newSource.html","slide")});$(page_create_backup_2.config.pageId).on("click",".authRequired-true",function(g){var h=$(this).clone(),f,a;f=app.rc.getJson("getAuthdataForPlugin",{pluginId:h.attr("data-html5-pluginId")},true);f.fail(function(){alert("ws error")});f.done(function(c){a=app.ni.element.ul({attributes:{"data-role":"listview","data-inset":"true"}});$.each(c,function(d,e){a.append(app.ni.element.li({text:app.ni.element.a({text:e.name,attributes:{href:"create_backup_2_newSink.html","data-transition":"slide","data-html5-authdataId":e.id,"data-html5-authdataName":e.name},classes:[]})}))});app.notify.dialog(a,app.lang.string("choose_profile","headlines"),false,app.lang.string("new_source_profile","actions"),app.lang.string("cancel","actions"),function(d){window.setTimeout(function(){switch(h.attr("data-html5-authType")){case"oauth":var j=h.attr("data-html5-oAuthUrl");var e=null;e=app.oa.generic(j);e.done(function(i){app.store.localStorage.set("data-html5-oAuthQuery",i);app.help.navigation.redirect("create_backup_2_oAuthFinished.html","slide")});e.fail(function(i){alert("oAuth error: "+i)});break;case"input":app.help.navigation.redirect("create_backup_2_inputAuth.html","slide");break;default:alert("not implemented")}},10)},function(d){},0)})})},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_create_backup_2={name:"create_backup_2",shortname:"create_backup_2",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_create_backup_2_inputAuth={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(h){app.debug.alert("page_"+this.config.name+".creator()",10);var i=$("div[data-role=header]");var l=$("div[data-role=content]");var g=$("div#nav-panel");var j=$("div#page-panel");app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var k=app.rc.getJson("getPlugin",{pluginId:app.store.localStorage.get("data-html5-pluginId"),expandConfigs:true},true);k.done(function(a){l.append(app.ni.element.h1({text:app.lang.string("headline","page.create_backup_2_inputAuth"),styles:{clear:"both"}}));l.append(app.ni.element.p({text:app.lang.string("description","page.create_backup_2_inputAuth")}));var b=app.ni.form.form({id:"frmCreateSource",attributes:{action:"#","data-ajax":"false"}});b.append(app.ni.text.text({id:"txtName",name:"title",placeholder:app.lang.string("title","labels"),label:true,labelText:app.lang.string("title","labels"),container:true,attributes:{value:app.lang.string("new authentication","page.create_backup")+": "+app.store.localStorage.get("data-html5-pluginId")}}));if(a.authDataDescription!=undefined){$.each(a.authDataDescription.requiredInputs,function(d,c){b.append(app.bmu.print.formElement(c,a.pluginId))})}b.append(app.ni.button.button({id:"btnAuthenticate",name:"btnAuthenticate",placeholder:app.lang.string("create_authdata","labels"),label:false,labelText:app.lang.string("create_authdata","labels"),container:false,value:app.lang.string("create_authdata","actions")}));l.append(b);app.notify.loader.remove();app.help.jQM.enhance(l)});k.fail(function(a){alert("ws error")})},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(page_create_backup_2_inputAuth.config.pageId).on("click","#btnAuthenticate",function(a){app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var e=app.help.form.serialize($("#frmCreateSource")),f;delete e.btnAuthenticate;delete e.title;f=app.rc.getJson("createAuthdata",{pluginId:app.store.localStorage.get("data-html5-pluginId"),name:b.find("#txtName").val(),properties:e},true);f.done(function(c){app.store.localStorage.set("data-html5-authdataId",c.id);app.store.localStorage.set("data-html5-authdataName",c.name);app.notify.loader.remove();app.help.navigation.redirect("create_backup_2_newSink.html","slide")});f.fail(function(){alert(" WS Error...geht ned")})})},functions:{},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12)}}};var config_create_backup_2_inputAuth={name:"create_backup_2_inputAuth",shortname:"create_backup_2_inputAuth",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_create_backup_2_newSink={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(j){app.debug.alert("page_"+this.config.name+".creator()",10);var k=$("div[data-role=header]");var p=$("div[data-role=content]");var i=$("div#nav-panel");var l=$("div#page-panel");app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var m,n=null,o=null;if(app.store.localStorage.get("data-html5-authrequired")){m=app.rc.getJson("getPluginOptions",{pluginId:app.store.localStorage.get("data-html5-pluginId"),authData:app.store.localStorage.get("data-html5-authdataId"),expandConfigs:true},true)}else{m=app.rc.getJson("getPlugin",{pluginId:app.store.localStorage.get("data-html5-pluginId"),expandConfigs:true},true)}m.done(function(a){p.append(app.ni.element.h1({text:app.lang.string("headline","page.create_backup_2_newSink"),styles:{clear:"both"}}));p.append(app.ni.element.p({text:app.lang.string("description","page.create_backup_2_newSink")}));var b=app.ni.form.form({id:"frmCreateSink",attributes:{action:"#","data-ajax":"false"},label:false});if(a.propertiesDescription!=undefined){if(a.propertiesDescription.length>0){$.each(a.propertiesDescription,function(e,d){b.append(app.bmu.print.formElement(d,a.pluginId))});o=true}else{o=false}}if(a.availableOptions!=undefined){if(a.availableOptions.length>0){var c=$(app.ni.select.multiple({id:"cboOptions",name:"options",label:true,labelText:app.lang.string("selectOptionsLabel","page.create_backup_2_newSink"),attributes:{"data-native-menu":false}}));c.append(app.ni.select.option({text:app.lang.string("selectOptions","page.create_backup_2_newSink")}));$.each(a.availableOptions,function(e,d){c.append(app.ni.select.option({text:d,attributes:{value:d}}))});b.append(c);n=false}else{n=false}}b.append(app.ni.button.button({id:"btnCreate",placeholder:app.lang.string("create_sink","labels"),label:true,labelText:app.lang.string("create_sink","labels"),container:true,value:app.lang.string("create_sink","actions")}));if(o||n){p.append(b);app.notify.loader.remove();app.help.jQM.enhance(p)}else{page_create_backup_2_newSink.createSinkProfile([],{})}});m.fail(function(a){alert("ws error")});return true},createSinkProfile:function(d,c){if(app.store.localStorage.get("data-html5-authRequired")){promise=app.rc.getJson("createSinkProfile",{pluginId:app.store.localStorage.get("data-html5-pluginId"),authData:{id:app.store.localStorage.get("data-html5-authdataId")},properties:c,options:d},true)}else{promise=app.rc.getJson("createSinkProfile",{pluginId:app.store.localStorage.get("data-html5-pluginId"),properties:c,options:d},true)}promise.done(function(a){app.store.localStorage.set("data-html5-themis-sink-profileid",a.profileId);app.notify.loader.remove();app.help.navigation.redirect("create_backup_3.html","slide")});promise.fail(function(){alert("Quelle nicht angelegt. WS Error")})},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(page_create_backup_2_newSink.config.pageId).on("click","#btnCreate",function(){var e=app.help.form.serialize($("#frmCreateSink")),f,a=Array();delete e.btnCreate;if(e.options!=undefined){a=e.options;delete e.options}page_create_backup_2_newSink.createSinkProfile(a,e)})},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_create_backup_2_newSink={name:"create_backup_2_newSink",shortname:"create_backup_2_newSink",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_create_backup_2_oAuthFinished={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(h){app.debug.alert("page_"+this.config.name+".creator()",10);var i=$("div[data-role=header]");var l=$("div[data-role=content]");var e=$("div#nav-panel");var j=$("div#page-panel");if(app.config.apacheCordova===true){console.log("todo");app.store.localStorage.set("data-html5-oAuthQuery",app.store.localStorage.get("data-html5-oAuthQuery").split("&")[0])}else{try{app.store.localStorage.set("data-html5-oAuthQuery",window.location.href.split("?")[1].split("&")[0])}catch(k){app.store.localStorage.set("data-html5-oAuthQuery","")}}l.append(app.ni.element.h1({text:app.lang.string("headline","page.create_backup_2_oAuthFinished"),styles:{clear:"both"}}));l.append(app.ni.element.p({text:app.lang.string("description","page.create_backup_2_oAuthFinished")}));l.append(app.ni.text.text({id:"txtName",placeholder:app.lang.string("authdata_name","labels"),label:true,labelText:app.lang.string("authdata_name","labels"),container:true,attributes:{value:app.lang.string("new authentication","page.create_backup")+": "+app.store.localStorage.get("data-html5-pluginId")}}));l.append(app.ni.button.button({id:"btnCreateAuthData",placeholder:app.lang.string("create_authdata","labels"),label:true,labelText:app.lang.string("create_authdata","labels"),container:true,value:app.lang.string("create_authdata","actions")}))},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(page_create_backup_2_oAuthFinished.config.pageId).on("click","#btnCreateAuthData",function(i){var j,h,g;j={oAuthQuery:app.store.localStorage.get("data-html5-oAuthQuery")};h=app.sess.getObject(app.store.localStorage.get("data-html5-pluginId"),"session_CreateSink");for(var a in h){j[a]=h[a]}g=app.rc.getJson("createAuthdata",{pluginId:app.store.localStorage.get("data-html5-pluginId"),name:$("#txtName").val(),properties:j},true);g.done(function(c){app.store.localStorage.set("data-html5-authdataId",c.id);app.help.navigation.redirect("create_backup_2_newSink.html","slide")});g.fail(function(){alert("ws error")})})},functions:{},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12)}}};var config_create_backup_2_oAuthFinished={name:"create_backup_2_oAuthFinished",shortname:"create_backup_2_oAuthFinished",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_create_backup_3={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(i){app.debug.alert("page_"+this.config.name+".creator()",10);var j=$("div[data-role=header]");var n=$("div[data-role=content]");var h=$("div#nav-panel");var k=$("div#page-panel");n.append(app.ni.element.h1({text:app.lang.string("headline","page.create_backup_3"),styles:{clear:"both"}}));n.append(app.ni.element.p({text:app.lang.string("description","page.create_backup_3")}));app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var l,m;m=app.rc.getJson([["getPluginConfiguration",{pluginId:app.store.localStorage.get("data-html5-source-pluginId"),configId:app.store.localStorage.get("data-html5-themis-source-profileid"),expandConfigs:true}],["getPlugin",{pluginId:app.store.localStorage.get("data-html5-source-pluginId"),expandConfigs:true}]],true);l=app.rc.getJson([["getPluginConfiguration",{pluginId:app.store.localStorage.get("data-html5-sink-pluginId"),configId:app.store.localStorage.get("data-html5-themis-sink-profileid"),expandConfigs:true}],["getPlugin",{pluginId:app.store.localStorage.get("data-html5-sink-pluginId"),expandConfigs:true}]],true);$.when(m,l).done(function(a,b){n.append(app.ni.element.h2({text:app.lang.string("chosen_datasource","headlines")}));n.append(app.ni.element.p({text:a.getPlugin.title+" - "}));n.append(app.ni.element.h2({text:app.lang.string("chosen_datasink","headlines")}));n.append(app.ni.element.p({text:b.getPlugin.title+" - "}));n.append(app.ni.element.h2({text:app.lang.string("job_settings","headlines")}));n.append(app.ni.text.text({id:"txtTitle",placeholder:app.lang.string("job_title","labels"),label:true,labelText:app.lang.string("job_title","labels"),container:true}));var c=["ONCE","DAILY","WEEKLY","MONTHLY","YEARLY"];var d=app.ni.select.single({id:"selSchedule"});$.each(c,function(e,f){d.append(app.ni.select.option({text:app.lang.string("schedule backup "+f,"create backup"),value:f}))});n.append(d);n.append(app.ni.button.button({id:"btnCreateBackup",placeholder:app.lang.string("create_backup","labels"),label:true,labelText:app.lang.string("create_backup","labels"),container:true,value:app.lang.string("create_backup","actions")}));app.notify.loader.remove();app.help.jQM.enhance(n)});$.when(m,m).fail(function(){alert("ws error ")})},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(b).on("click","#btnCreateBackup",function(){app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var a=app.rc.getJson("createBackupjob",{jobTitle:b.find("#txtTitle").val(),schedule:$("#selSchedule").val(),start:Date.now(),source:app.store.localStorage.get("data-html5-themis-source-profileid"),actions:[],sink:app.store.localStorage.get("data-html5-themis-sink-profileid")},true);a.done(function(d){app.notify.loader.remove();app.store.localStorage.clearHtml5();app.help.navigation.redirect("backup_jobs.html","slide")});a.fail(function(d){alert("webservice error: "+d)})})},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_create_backup_3={name:"create_backup_3",shortname:"create_backup_3",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_create_backup_oAuthHandler={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(g){app.debug.alert("page_"+this.config.name+".creator()",10);var h=$("div[data-role=header]");var j=$("div[data-role=content]");var f=$("div#nav-panel");var i=$("div#page-panel");app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"))},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10)},functions:{},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12);window.setTimeout(function(){var a=app.oa.getQueryString(),b=app.store.localStorage.get("data-html5-destinationType");if(b=="source"){app.help.navigation.redirect("create_backup_1_oAuthFinished.html?"+a,"slide")}else{if(b=="sink"){app.help.navigation.redirect("create_backup_2_oAuthFinished.html?"+a,"slide")}else{alert("oAuth Error")}}},500)}}};var config_create_backup_oAuthHandler={name:"create_backup_oAuthHandler",shortname:"create_backup_oAuthHandler",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_friendList={config:null,include:null,include_once:null,elements:null,constructor:function(){app.debug.trace("page_friendList.constructor()");var b=$.Deferred();b.resolve();return b.promise()},creator:function(g){app.debug.trace("page_friendList.creator()");var h=$("div[data-role=header]");var j=$("div[data-role=content]");var f=$("div#nav-panel");var i=$("div#page-panel");app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));j.append(app.ni.element.a({id:"btnAddFriend",classes:["ui-btn","ui-btn-inline"],text:app.lang.string("add friend","page.friendList")}));j.append(app.ni.element.a({id:"btnAddFriendHeritage",classes:["ui-btn","ui-btn-inline"],text:app.lang.string("add friend heritage","page.friendList")}));app.rc.getJson([["listFriendsSharing",{}],["listFriendsHeritage",{}]],true,3).done(function(d){var c,a,b;c=d.listFriendsSharing;a=d.listFriendsHeritage;j.append(app.ni.element.h1({text:app.lang.string("sharing friends","headlines")}));b=$(app.template.get("listA","responsive"));$.each(c,function(e,l){b.append(app.ni.list.thumbnail({href:"#",imageSrc:app.img.getUrlById("friend_"+l),title:l.name,headline:l.name,text:l.description,classes:["friend"],attributes:{"data-html5-friendId":l.friendId}}))});j.append(b);j.append(app.ni.element.h1({text:app.lang.string("heritage friends","headlines")}));b=$(app.template.get("listA","responsive"));$.each(a,function(e,l){b.append(app.ni.list.thumbnail({href:"#",imageSrc:app.img.getUrlById("friend_"+l),title:l.name,headline:l.name,text:l.description,classes:["heritage"],attributes:{"data-html5-friendId":l.bmuUserId}}))});j.append(b)}).fail(function(){}).always(function(){app.notify.loader.remove();app.help.jQM.enhance(j)})},async:{promise:null,result:null,elements:null,creator:function(c){app.debug.trace("page_friendList.async.creator()");var d=$.Deferred();d.resolve();return d.promise()},call:function(b){app.debug.trace("page_friendList.async.call()");return app.rc.getJson()},done:function(b){app.debug.trace("page_friendList.async.done()")},fail:function(b){app.debug.trace("page_friendList.async.fail()");alert("WS fails: "+JSON.stringify(this.result))},always:function(b){app.debug.trace("page_friendList.async.always()")},abort:function(b){app.debug.trace("page_friendList.async.abort()")}},setEvents:function(b){app.debug.trace("page_friendList.setEvents()");$(this.config.pageId).on("storagefilled",".heritage",function(){json=app.rc.getJson("getHeritageToken",{userId:app.store.localStorage.get("data-html5-friendId")},false,3);app.notify.dialog({text:$("<p>Erbtoken: "+json.activationCode+"</p>").append(app.ni.element.a({id:"getToken",classes:["ui-btn"],text:"QR Code herunterladen"})),title:"Erbe",headline:false,buttonLeft:"Erbe löschen",buttonRight:"Schließen",callbackButtonLeft:function(){app.rc.getJson("deleteAFriendHeritage",{friendId:app.store.localStorage.get("data-html5-friendId")},true,1).done(function(){alert("done")}).fail(function(){alert("fail")})},callbackButtonRight:false,delayInMs:0})});$(this.config.pageId).on("storagefilled","#getToken",function(){$.ajax({url:app.wsc.getServer("backmeup",false)+"/backmeup-service-rest/users/"+app.store.localStorage.get("data-html5-friendId")+"/activationCode",async:false,headers:{Authorization:app.store.localStorage.get("themis-token"),Accept:"application/pdf"},dataType:"binary",processData:false,success:function(d){var a=URL.createObjectURL(d);window.setTimeout(function(){window.open(a)},300)}})});$(this.config.pageId).on("storagefilled",".friend",function(){app.notify.dialog({text:" ",title:"Erbe",headline:false,buttonLeft:"Freund löschen",buttonRight:"Ok",callbackButtonLeft:function(){app.rc.getJson("deleteAFriend",{friendId:app.store.localStorage.get("data-html5-friendId")},true,1).done(function(){alert("done")}).fail(function(){alert("fail")})},callbackButtonRight:false,delayInMs:0})});$(this.config.pageId).on("click","#btnAddFriend",function(d){var a;a=app.ni.element.div().append(app.ni.text.text({id:"txtName",placeholder:app.lang.string("name","labels"),label:true,labelText:app.lang.string("name","labels"),container:true})).append(app.ni.text.text({id:"txtDescription",placeholder:app.lang.string("description","labels"),label:true,labelText:app.lang.string("description","labels"),container:true})).append(app.ni.text.email({id:"txtEmail",placeholder:app.lang.string("email","labels"),label:true,labelText:app.lang.string("email","labels"),container:true}));app.notify.dialog({text:a,title:false,headline:app.lang.string("add friend","page.friendList"),buttonLeft:app.lang.string("add friend","actions"),buttonRight:app.lang.string("cancel","actions"),callbackButtonLeft:function(){var h,i,c,j;app.rc.getJson("addAFriendSharing",{name:$("#txtName").val(),description:$("#txtDescription").val(),email:$("#txtEmail").val()},true).done(function(){alert("done")}).fail(function(){alert("fail")})},callbackButtonRight:false,delayInMs:0})});$(this.config.pageId).on("click","#btnAddFriendHeritage",function(d){var a;a=app.ni.element.div().append(app.ni.text.text({id:"txtName",placeholder:app.lang.string("name","labels"),label:true,labelText:app.lang.string("name","labels"),container:true})).append(app.ni.text.text({id:"txtDescription",placeholder:app.lang.string("description","labels"),label:true,labelText:app.lang.string("description","labels"),container:true})).append(app.ni.text.email({id:"txtEmail",placeholder:app.lang.string("email","labels"),label:true,labelText:app.lang.string("email","labels"),container:true}));app.notify.dialog({text:a,title:false,headline:app.lang.string("add friend heritage","page.friendList"),buttonLeft:app.lang.string("add friend heritage","actions"),buttonRight:app.lang.string("cancel","actions"),callbackButtonLeft:function(){var h,i,c,j;app.rc.getJson("addAFriendHeritage",{name:$("#txtName").val(),description:$("#txtDescription").val(),email:$("#txtEmail").val()},true).done(function(){alert("done")}).fail(function(){alert("fail")})},callbackButtonRight:false,delayInMs:0})})},functions:{},events:{pagebeforechange:function(c,d){app.debug.trace("page_friendList.pagebeforechange()")},pagebeforecreate:function(c,d){app.debug.trace("page_friendList.pagebeforecreate()")},pagebeforehide:function(c,d){app.debug.trace("page_friendList.pagebeforehide()")},pagebeforeload:function(c,d){app.debug.trace("page_friendList.pagebeforeload()")},pagebeforeshow:function(c,d){app.debug.trace("page_friendList.pagebeforeshow()")},pagechange:function(c,d){app.debug.trace("page_friendList.pagechange()")},pagechangefailed:function(c,d){app.debug.trace("page_friendList.pagechangefailed()")},pagecreate:function(c,d){app.debug.trace("page_friendList.pagecreate()")},pagehide:function(c,d){app.debug.trace("page_friendList.pagehide()")},pageinit:function(c,d){app.debug.trace("page_friendList.pageinit()")},pageload:function(c,d){app.debug.trace("page_friendList.pageload()")},pageloadfailed:function(c,d){app.debug.trace("page_friendList.pageloadfailed()")},pageremove:function(c,d){app.debug.trace("page_friendList.pageremove()")},pageshow:function(c,d){app.debug.trace("page_friendList.pageshow()")}}};var config_friendList={name:"friendList",shortname:"friendList",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:true,contentRefreshInterval:30000,asyncLoading:false};var page_index={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(g){app.debug.alert("page_"+this.config.name+".creator()",10);try{if(app.store.localStorage.get("data-html5-themis-loggedin")){$(document).off();app.help.navigation.redirect("start.html")}else{app.debug.alert("page_"+this.config.name+".creator()",10);var h=g.find("div[data-role=header]");var i=g.find("div[data-role=content]");var f=g.find("div#nav-panel");i.append(app.ni.element.h1({text:app.lang.string("index","headlines")}));i.append(app.ni.element.a({id:"btnLogin",text:app.lang.string("login","actions"),attributes:{href:"login.html"},classes:["ui-btn"]}));i.append(app.ni.element.a({id:"btnRegister",text:app.lang.string("register","actions"),attributes:{href:"register.html"},classes:["ui-btn"]}))}success=true}catch(j){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(j,null,4),50);app.debug.log(JSON.stringify(j,null,4));success=false}return success},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10)},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_index={name:"index",shortname:"index",template:"",useKeepAlive:true,loginObligate:false,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_job_details={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(u){app.debug.alert("page_"+this.config.name+".creator()",10);try{app.debug.alert("page_"+this.config.name+".creator()",10);var o=u.find("div[data-role=header]");var m=u.find("div[data-role=content]");var l=u.find("div#nav-panel");var t=app.rc.getJson("jobDetails",{username:app.store.localStorage.get("data-html5-themis-username"),jobId:app.store.localStorage.get("data-html5-backupjobid")});var q=app.rc.getJson("jobStatus",{username:app.store.localStorage.get("data-html5-themis-username"),jobId:app.store.localStorage.get("data-html5-backupjobid"),fromDate:0,toDate:Date.now()});m.append(app.ni.element.h1({text:app.lang.string("job_details","headlines")+": "+t.jobTitle}));var v=$(app.template.get("grid-33-33-33","responsive"));var n=v.find(".ui-block-a .ui-body");var p=v.find(".ui-block-b .ui-body");var r=v.find(".ui-block-c .ui-body");n.append(app.ni.element.h2({text:app.lang.string("datasource","headlines")}));n.append(app.ni.element.p({text:"Von welchem Webservice bekomme ich die Daten für die Datenquelle: "+app.store.localStorage.get("data-html5-datasourceid")}));p.append(app.ni.element.h2({text:app.lang.string("datasink","headlines")}));p.append(app.ni.element.p({text:"Von welchem Webservice bekomme ich die Daten für die Datensenke: "+app.store.localStorage.get("data-html5-datasinkid")}));r.append(app.ni.element.h2({text:app.lang.string("job_status","headlines")}));m.append(v);m.append(app.ni.element.a({id:"btnBackupEdit",text:app.lang.string("backup_edit","actions"),attributes:{href:"backup_edit.html"},classes:["ui-btn"]}));m.append(app.ni.element.a({id:"btnBackupDelete",text:app.lang.string("backup_delete","actions"),classes:["ui-btn"]}));m.append(app.ni.element.a({id:"btnBackupLog",text:app.lang.string("backup_log","actions"),attributes:{href:"backup_log.html"},classes:["ui-btn"]}));success=true}catch(s){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(s,null,4),50);app.debug.log(JSON.stringify(s,null,4));success=false}return success},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10)},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_job_details={name:"job_details",shortname:"job_details",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_login={config:null,elements:null,constructor:function(){var b=$.Deferred();b.resolve();return b.promise()},creator:function(e){app.debug.alert("page_"+this.config.name+".creator()",10);app.template.overwrite("#"+e.attr("id"),"JQueryMobilePlainPage");$.each(app.detect.classes.array(),function(a,b){if(!$("body").hasClass(a)){$("body").addClass(a)}});var f=e.find("div[data-role=content]");if(app.detect.isDesktop()){f.append(app.ni.element.img({attributes:{src:"../images/logo_full.png",alt:"LOGO"},classes:["logo"]}))}f.append(app.ni.element.h1({text:app.lang.string("login","headlines")}));var d=app.ni.form.form({id:"frmLogin",attributes:{action:"#","data-ajax":"false"},label:false});d.append(app.ni.text.text({id:"txtUsername",placeholder:app.lang.string("username","labels"),label:false,labelText:app.lang.string("username","labels"),container:false}));d.append(app.ni.text.password({id:"txtPassword",placeholder:app.lang.string("password","labels"),label:false,labelText:app.lang.string("password","labels"),container:false}));d.append(app.ni.button.submit({id:"btnLogin",value:app.lang.string("login","actions"),classes:["ui-btn"],attributes:{href:"#"}}));f.append(d);f.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("lost_password","actions"),attributes:{href:"lostPassword.html","data-transition":"slideup"}}),classes:["app-subtext2"]}));f.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("register","actions"),attributes:{href:"register.html","data-transition":"slideup"}}),classes:["app-subtext1"]}))},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){$(page_login.config.pageId).on("submit","#frmLogin",function(a){app.debug.alert("page_"+page_register.config.name+" #btnRegister click",25);a.preventDefault();if(!app.help.validate.username(b.find("#txtUsername").val())){app.notify.alert(app.lang.string("error","page.login"),false,app.lang.string("error_headline","page.login"),app.lang.string("error_button","page.login"))}else{if(!app.help.validate.password(b.find("#txtPassword").val())){app.notify.alert(app.lang.string("error","page.login"),false,app.lang.string("error_headline","page.login"),app.lang.string("error_button","page.login"))}else{app.template.append("#btnLogin","app-loader-bubble-inline-button");var d=app.rc.getJson("authenticate",{username:b.find("#txtUsername").val(),password:b.find("#txtPassword").val()},true);d.always(function(){b.find(".bubblingG-inline-button").remove()});d.done(function(c){if(c.accessToken!=undefined){app.store.localStorage.clearHtml5();app.sess.loggedIn(true);app.store.localStorage.set("themis-token",c.accessToken);app.rc.getJson("search",{query:"startup indexer"},true);app.help.navigation.redirect(app.config.startPage_loggedIn,"slideup")}else{alert("Benutzername oder Passwort falsch.")}});d.fail(function(c){app.notify.alert(app.lang.string("error","page.login"),app.lang.string("error_headline","page.login"),false,app.lang.string("error_button","page.login"))})}}})},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_login={name:"login",shortname:"login",template:"",useKeepAlive:true,loginObligate:false,isGlobalPage:false,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_loginToken={config:null,include:null,include_once:null,elements:null,constructor:function(){app.debug.trace("page_loginToken.constructor()");var b=$.Deferred();b.resolve();return b.promise()},creator:function(f){app.debug.trace("page_loginToken.creator()");app.template.overwrite("#"+f.attr("id"),"JQueryMobilePlainPage");$.each(app.detect.classes.array(),function(a,b){if(!$("body").hasClass(a)){$("body").addClass(a)}});var g=f.find("div[data-role=content]");if(app.detect.isDesktop()){g.append(app.ni.element.img({attributes:{src:"../images/logo_full.png",alt:"LOGO"},classes:["logo"]}))}g.append(app.ni.element.h1({text:app.lang.string("login token","headlines")}));var h=app.ni.form.form({id:"frmLoginToken",attributes:{action:"#","data-ajax":"false"},label:false});h.append(app.ni.text.text({id:"txtToken",placeholder:app.lang.string("token","labels"),label:false,labelText:app.lang.string("token","labels"),container:false}));h.append(app.ni.button.submit({id:"btnLogin",value:app.lang.string("login","actions"),classes:["ui-btn"],attributes:{href:"#"}}));g.append(h);g.append(app.ni.element.p({text:app.ni.element.a({id:"btnStart",text:app.lang.string("home page","actions"),attributes:{href:"static-index.html","data-transition":"slideup"}}),classes:["app-subtext3"]}));g.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("lost_password","actions"),attributes:{href:"lostPassword.html","data-transition":"slideup"}}),classes:["app-subtext2"]}));g.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("register","actions"),attributes:{href:"register.html","data-transition":"slideup"}}),classes:["app-subtext1"]}));if(window.location.href.indexOf("authCode=")>-1){var e=window.location.href.substring(window.location.href.indexOf("authCode=")+"authCode=".length);$("#txtToken").val(e)}},async:{promise:null,result:null,elements:null,creator:function(c){app.debug.trace("page_loginToken.async.creator()");var d=$.Deferred();d.resolve();return d.promise()},call:function(b){app.debug.trace("page_loginToken.async.call()");return app.rc.getJson()},done:function(b){app.debug.trace("page_loginToken.async.done()")},fail:function(b){app.debug.trace("page_loginToken.async.fail()");alert("WS fails: "+JSON.stringify(this.result))},always:function(b){app.debug.trace("page_loginToken.async.always()")},abort:function(b){app.debug.trace("page_loginToken.async.abort()")}},setEvents:function(b){app.debug.trace("page_loginToken.setEvents()");$(this.config.pageId).on("submit","#frmLoginToken",function(a){a.preventDefault();app.template.append("#btnLogin","app-loader-bubble-inline-button");app.rc.getJson("authenticateWithToken",{activationCode:$("#txtToken").val()},true,3).done(function(d){if(d.accessToken!=undefined){app.store.localStorage.clearHtml5();app.sess.loggedIn(true);app.store.localStorage.set("themis-token",d.accessToken);app.rc.getJson("search",{query:"startup indexer"},true);app.sess.setValue("heritage");app.help.navigation.redirect("startToken.html","slideup")}else{alert("Token falsch.")}}).fail(function(){alert("Token falsch.")}).always(function(){b.find(".bubblingG-inline-button").remove()})})},functions:{},events:{pagebeforechange:function(c,d){app.debug.trace("page_loginToken.pagebeforechange()")},pagebeforecreate:function(c,d){app.debug.trace("page_loginToken.pagebeforecreate()")},pagebeforehide:function(c,d){app.debug.trace("page_loginToken.pagebeforehide()")},pagebeforeload:function(c,d){app.debug.trace("page_loginToken.pagebeforeload()")},pagebeforeshow:function(c,d){app.debug.trace("page_loginToken.pagebeforeshow()")},pagechange:function(c,d){app.debug.trace("page_loginToken.pagechange()")},pagechangefailed:function(c,d){app.debug.trace("page_loginToken.pagechangefailed()")},pagecreate:function(c,d){app.debug.trace("page_loginToken.pagecreate()")},pagehide:function(c,d){app.debug.trace("page_loginToken.pagehide()")},pageinit:function(c,d){app.debug.trace("page_loginToken.pageinit()")},pageload:function(c,d){app.debug.trace("page_loginToken.pageload()")},pageloadfailed:function(c,d){app.debug.trace("page_loginToken.pageloadfailed()")},pageremove:function(c,d){app.debug.trace("page_loginToken.pageremove()")},pageshow:function(c,d){app.debug.trace("page_loginToken.pageshow()")}}};var config_loginToken={name:"loginToken",shortname:"loginToken",template:"",useKeepAlive:true,loginObligate:false,isGlobalPage:false,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_register={config:null,elements:null,constructor:function(){var b=$.Deferred();b.resolve();return b.promise()},creator:function(d){app.debug.alert("page_"+this.config.name+".creator()",10);app.template.overwrite("#"+d.attr("id"),"JQueryMobilePlainPage");$.each(app.detect.classes.array(),function(a,b){if(!$("body").hasClass(a)){$("body").addClass(a)}});var c=d.find("div[data-role=content]");if(app.detect.isDesktop()){c.append(app.ni.element.img({attributes:{src:"../images/logo_full.png",alt:"LOGO"},classes:["logo"]}))}c.append(app.ni.element.h1({text:app.lang.string("register","headlines")}));c.append(app.ni.element.p({text:app.lang.string("register","texts"),attributes:{id:"pDescription"}}));c.append(app.ni.element.a({id:"btnLetsGo",text:app.lang.string("lets_go","actions"),classes:["ui-btn"],attributes:{href:"register_1_terms.html","data-transition":"slide"}}));c.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("lost_password","actions"),attributes:{href:"lostPassword.html","data-transition":"slideup"}}),classes:["app-subtext2"]}));c.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("login","actions"),attributes:{href:"login.html","data-transition":"slideup"}}),classes:["app-subtext1"]}))},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){$(document).on("swiperight","#"+b.attr("id"),function(a){app.help.navigation.redirect("static-index.html","slide reverse")})},functions:{},events:{pagebeforechange:function(b){app.debug.alert("",3)},pagebeforecreate:function(b){},pagebeforehide:function(b){},pagebeforeload:function(b){},pagebeforeshow:function(b){},pagechange:function(b){},pagechangefailed:function(b){},pagecreate:function(b){},pagehide:function(b){},pageinit:function(b){},pageload:function(b){},pageloadfailed:function(b){},pageremove:function(b){},pageshow:function(b){}}};var config_register={name:"register",shortname:"register",template:"",useKeepAlive:true,loginObligate:false,isGlobalPage:false,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_register_1_terms={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(d){app.debug.alert("page_"+this.config.name+".creator()",10);app.template.overwrite("#"+d.attr("id"),"JQueryMobilePlainPage");$.each(app.detect.classes.array(),function(a,b){if(!$("body").hasClass(a)){$("body").addClass(a)}});var c=d.find("div[data-role=content]");if(app.detect.isDesktop()){c.append(app.ni.element.img({attributes:{src:"../images/logo_full.png",alt:"LOGO"},classes:["logo"]}))}c.append(app.ni.element.h1({text:app.lang.string("register_1_terms","headlines")}));c.append(app.ni.element.p({text:app.lang.string("accept_terms","texts",{privacy_policy:app.ni.element.a({id:"lnkPrivacyPolicy",text:app.lang.string("privacy_policy","links"),attributes:{href:"#"}}),terms:app.ni.element.a({id:"lnkTerms",text:app.lang.string("terms","links"),attributes:{href:"#"}})})}));c.append(app.ni.element.a({id:"btnContinue",text:app.lang.string("accept_terms","actions"),classes:["ui-btn"],attributes:{href:"register_2_name.html","data-transition":"slide"}}));c.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("lost_password","actions"),attributes:{href:"lostPassword.html","data-transition":"slideup"}}),classes:["app-subtext2"]}));c.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("login","actions"),attributes:{href:"login.html","data-transition":"slideup"}}),classes:["app-subtext1"]}))},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(document).on("swiperight","#"+b.attr("id"),function(a){app.help.navigation.redirect("register.html","slide reverse")})},functions:{},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12)}}};var config_register_1_terms={name:"register_1_terms",shortname:"register_1_terms",template:"",useKeepAlive:true,loginObligate:false,isGlobalPage:false,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_register_2_name={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(e){app.debug.alert("page_"+this.config.name+".creator()",10);app.template.overwrite("#"+e.attr("id"),"JQueryMobilePlainPage");$.each(app.detect.classes.array(),function(a,b){if(!$("body").hasClass(a)){$("body").addClass(a)}});var f=e.find("div[data-role=content]");if(app.detect.isDesktop()){f.append(app.ni.element.img({attributes:{src:"../images/logo_full.png",alt:"LOGO"},classes:["logo"]}))}f.append(app.ni.element.h1({text:app.lang.string("register_2_name","headlines")}));var d=app.ni.form.form({id:"frmRegisterName",attributes:{action:"#","data-ajax":"false"},label:false});d.append(app.ni.text.text({id:"txtFirstname",placeholder:app.lang.string("firstname","labels"),label:false,labelText:app.lang.string("firstname","labels"),container:false}));d.append(app.ni.text.text({id:"txtLastname",placeholder:app.lang.string("lastname","labels"),label:false,labelText:app.lang.string("lastname","labels"),container:false}));d.append(app.ni.text.text({id:"txtUsername",placeholder:app.lang.string("username","labels"),label:false,labelText:app.lang.string("username","labels"),container:false}));d.append(app.ni.element.p({text:app.lang.string("what_is_your_name","texts"),attributes:{id:"pDescription"}}));d.append(app.ni.element.a({id:"btnContinue",text:app.lang.string("continue","actions"),attributes:{href:"#"},classes:["ui-btn"],styles:{display:"none"}}));f.append(d);f.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("lost_password","actions"),attributes:{href:"lostPassword.html","data-transition":"slideup"}}),classes:["app-subtext2"]}));f.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("login","actions"),attributes:{href:"login.html","data-transition":"slideup"}}),classes:["app-subtext1"]}))},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(document).on("swiperight","#"+b.attr("id"),function(a){app.help.navigation.redirect("register_1_terms.html","slide reverse")});$(this.config.pageId).on("focus blur keyup","#txtFirstname, #txtLastname, #txtUsername",function(a){if(!(app.help.validate.firstname(b.find("#txtFirstname").val())&&app.help.validate.lastname(b.find("#txtLastname").val())&&app.help.validate.username(b.find("#txtUsername").val()))){b.find("#pDescription").css("display","block");b.find("#btnContinue").css("display","none");b.find("#pDescription").text(app.lang.string("bad_name","texts"));b.find("#pDescription").addClass("error")}else{b.find("#pDescription").css("display","none");b.find("#btnContinue").css("display","block");b.find("#pDescription").removeClass("error")}});$(this.config.pageId).on("click","#btnContinue",function(a){if(!(app.help.validate.firstname(b.find("#txtFirstname").val())&&app.help.validate.lastname(b.find("#txtLastname").val())&&app.help.validate.username(b.find("#txtUsername").val()))){b.find("#pDescription").css("display","block");b.find("#btnContinue").css("display","none");b.find("#pDescription").text(app.lang.string("bad_name","texts"));b.find("#pDescription").addClass("error")}else{app.help.navigation.redirect("register_3_credentials.html","slide")}})},functions:{},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12);app.store.localStorage.pufferFormValues(d)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12);app.store.localStorage.restorePufferedFormValues(d)}}};var config_register_2_name={name:"register_2_name",shortname:"register_2_name",template:"",useKeepAlive:true,loginObligate:false,isGlobalPage:false,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_register_3_credentials={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(e){app.debug.alert("page_"+this.config.name+".creator()",10);app.template.overwrite("#"+e.attr("id"),"JQueryMobilePlainPage");$.each(app.detect.classes.array(),function(a,b){if(!$("body").hasClass(a)){$("body").addClass(a)}});var f=e.find("div[data-role=content]");if(app.detect.isDesktop()){f.append(app.ni.element.img({attributes:{src:"../images/logo_full.png",alt:"LOGO"},classes:["logo"]}))}f.append(app.ni.element.h1({text:app.lang.string("register_2_credentials","headlines")}));var d=app.ni.form.form({id:"frmRegisterCredentials",attributes:{action:"#","data-ajax":"false"},label:false});d.append(app.ni.text.text({id:"txtEmail",placeholder:app.lang.string("email","labels"),label:false,labelText:app.lang.string("email","labels"),container:false}));d.append(app.ni.text.password({id:"txtPassword",placeholder:app.lang.string("password","labels"),label:false,labelText:app.lang.string("password","labels"),container:false}));d.append(app.ni.text.password({id:"txtPasswordRpt",placeholder:app.lang.string("password_rpt","labels"),label:false,labelText:app.lang.string("password_rpt","labels"),container:false}));d.append(app.ni.element.p({text:app.lang.string("insert_login_data","texts"),attributes:{id:"pDescription"}}));d.append(app.ni.element.a({id:"btnContinue",text:app.lang.string("continue","actions"),attributes:{href:"#"},classes:["ui-btn"],styles:{display:"none"}}));f.append(d);f.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("lost_password","actions"),attributes:{href:"lostPassword.html","data-transition":"slideup"}}),classes:["app-subtext2"]}));f.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("login","actions"),attributes:{href:"login.html","data-transition":"slideup"}}),classes:["app-subtext1"]}))},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(document).on("swiperight","#"+b.attr("id"),function(a){app.help.navigation.redirect("register_2_name.html","slide reverse")});$(this.config.pageId).on("focus blur keyup","#txtEmail, #txtPassword, #txtPasswordRpt",function(a){if(!app.help.validate.email(b.find("#txtEmail").val())){b.find("#pDescription").css("display","block");b.find("#btnContinue").css("display","none");b.find("#pDescription").text(app.lang.string("bad_email","texts"));b.find("#pDescription").addClass("error")}else{if(!app.help.validate.password(b.find("#txtPassword").val())){b.find("#pDescription").css("display","block");b.find("#btnContinue").css("display","none");b.find("#pDescription").text(app.lang.string("bad_password","texts"));b.find("#pDescription").addClass("error")}else{if(!app.help.validate.equal(b.find("#txtPassword").val(),b.find("#txtPasswordRpt").val())){b.find("#pDescription").css("display","block");b.find("#btnContinue").css("display","none");b.find("#pDescription").text(app.lang.string("bad_passwords_not_equal","texts"));b.find("#pDescription").addClass("error")}else{b.find("#pDescription").css("display","none");b.find("#btnContinue").css("display","block");b.find("#pDescription").removeClass("error")}}}});$(this.config.pageId).on("click","#btnContinue",function(a){if(!app.help.validate.email(b.find("#txtEmail").val())){b.find("#pDescription").css("display","block");b.find("#btnContinue").css("display","none");b.find("#pDescription").text(app.lang.string("bad_email","texts"));b.find("#pDescription").addClass("error")}else{if(!app.help.validate.password(b.find("#txtPassword").val())){b.find("#pDescription").css("display","block");b.find("#btnContinue").css("display","none");b.find("#pDescription").text(app.lang.string("bad_password","texts"));b.find("#pDescription").addClass("error")}else{if(!app.help.validate.equal(b.find("#txtPassword").val(),b.find("#txtPasswordRpt").val())){b.find("#pDescription").css("display","block");b.find("#btnContinue").css("display","none");b.find("#pDescription").text(app.lang.string("bad_passwords_not_equal","texts"));b.find("#pDescription").addClass("error")}else{app.help.navigation.redirect("register_4_final.html","slide")}}}})},functions:{},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12);app.store.localStorage.pufferFormValues(d)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12);app.store.localStorage.restorePufferedFormValues(d)}}};var config_register_3_credentials={name:"register_3_credentials",shortname:"register_3_credentials",template:"",useKeepAlive:true,loginObligate:false,isGlobalPage:false,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_register_4_final={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(d){app.debug.alert("page_"+this.config.name+".creator()",10);app.template.overwrite("#"+d.attr("id"),"JQueryMobilePlainPage");$.each(app.detect.classes.array(),function(a,b){if(!$("body").hasClass(a)){$("body").addClass(a)}});var c=d.find("div[data-role=content]");if(app.detect.isDesktop()){c.append(app.ni.element.img({attributes:{src:"../images/logo_full.png",alt:"LOGO"},classes:["logo"]}))}c.append(app.ni.element.h1({text:app.lang.string("register_4_final","headlines")}));app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));c.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("lost_password","actions"),attributes:{href:"lostPassword.html","data-transition":"slideup"}}),classes:["app-subtext2"]}));c.append(app.ni.element.p({text:app.ni.element.a({id:"btnLostPassword",text:app.lang.string("login","actions"),attributes:{href:"login.html","data-transition":"slideup"}}),classes:["app-subtext1"]}))},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10)},functions:{},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(n,j){app.debug.alert("page_"+$(j).attr("id")+".pageshow()",12);var m=app.store.localStorage.getPufferedFormValue("register_2_name","txtFirstname"),o=app.store.localStorage.getPufferedFormValue("register_2_name","txtLastname"),k=app.store.localStorage.getPufferedFormValue("register_2_name","txtUsername"),p=app.store.localStorage.getPufferedFormValue("register_3_credentials","txtPassword"),i=app.store.localStorage.getPufferedFormValue("register_3_credentials","txtEmail");var l=app.rc.getJson("register",{firstname:m,lastname:o,username:k,password:p,email:i},true);l.done(function(a){if(a.userId){app.store.localStorage.set("data-html5-themis-loggedin",false);app.store.localStorage.set("data-html5-themis-userid",a.userId);app.store.localStorage.set("data-html5-themis-activated",a.activated);app.store.localStorage.set("data-html5-themis-username",j.find("#txtUsername").val());app.help.navigation.redirect("activate_account.html","slide")}else{app.notify.alert(app.lang.string("bad_register","notifications"),false,app.lang.string("bad_register","headlines"),app.lang.string("ok","actions"))}});l.fail(function(a){app.notify.alert(app.lang.string("bad_register","notifications"),false,app.lang.string("bad_register","headlines"),app.lang.string("ok","actions"))})}}};var config_register_4_final={name:"register_4_final",shortname:"register_4_final",template:"",useKeepAlive:true,loginObligate:false,isGlobalPage:false,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_search={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(i){app.debug.alert("page_"+this.config.name+".creator()",10);var j=$("div[data-role=header]");var l=$("div[data-role=content]");var h=$("div#nav-panel");var k=$("div#page-panel");l.append(app.ni.element.h1({text:app.lang.string("search_in_backups","headlines")}));var m=app.ni.form.form({id:"frmSearch",attributes:{action:"#","data-ajax":"false"},label:false});m.append(app.ni.text.text({id:"txtSearch",placeholder:(app.store.localStorage.get("data-html5-themis-search-value"))?app.store.localStorage.get("data-html5-themis-search-value"):app.lang.string("search","labels"),label:false,labelText:app.lang.string("search","labels"),container:false}));m.append(app.ni.element.a({id:"btnSearch",text:app.lang.string("search","actions"),attributes:{href:"#"},classes:["ui-btn"],styles:{display:"none"}}));l.append(m);var n=app.ni.element.div({id:"divSearchResults",styles:{"margin-top":"15px","border-top":"1px solid #999"}});l.append(n);if(app.store.localStorage.get("data-html5-themis-search-value")!=null){window.setTimeout(function(){page_search.updateSearchDiv(n)},1000)}},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(this.config.pageId).on("focus click","#txtSearch",function(a){$("#btnSearch").css("display","block");if(app.store.localStorage.get("data-html5-themis-search-value")&&$("#txtSearch").val()==""){$("#txtSearch").val(app.store.localStorage.get("data-html5-themis-search-value"));this.select()}});$(this.config.pageId).on("click","#btnApplyFilter",function(){page_search.updateSearchDiv($("#divSearchResults"))}),$(this.config.pageId).on("click","#btnRemoveFilter",function(){$(".app-search-filter option:selected").val("");page_search.updateSearchDiv($("#divSearchResults"))}),$(this.config.pageId).on("click","#btnShareSearchResult",function(){page_search.singleResult.shareDocumentGroup()});$(this.config.pageId).on("submit","#frmSearch",function(a){a.preventDefault();app.store.localStorage.set("data-html5-themis-search-value",$("#txtSearch").val());page_search.updateSearchDiv($("#divSearchResults"))});$(this.config.pageId).on("click","#btnTagModeOn",function(a){a.preventDefault();$(".app-search-item").each(function(f,e){$(e).find(".ui-li-aside").attr("data-text",$(e).find(".ui-li-aside").text());$(e).find(".ui-li-aside").html(app.ni.checkbox.checkbox({}));$(e).replaceWith($(e)[0].outerHTML.replace("onclick=","onclick_disable="))})});$(this.config.pageId).on("click",".app-search-item",function(a){var d=$(this).find("input[type=checkbox]");if(d.length>0){if(d.prop("checked")){d.prop("checked",false)}else{d.prop("checked",true)}}});$(this.config.pageId).on("click","#btnTagModeOff",function(a){a.preventDefault();$(".app-search-item").each(function(f,e){$(e).find(".ui-li-aside").text($(e).find(".ui-li-aside").attr("data-text"));$(e).replaceWith($(e)[0].outerHTML.replace("onclick_disable=","onclick="))})});$(this.config.pageId).on("click","#btnCreateCollection",function(a){a.preventDefault();var d=[];$(".app-search-item .ui-li-aside input[type=checkbox]:checked").each(function(f,c){d.push($(c).parent().parent().attr("data-html5-fileid"))});page_search.singleResult.createCollection(d)});$(this.config.pageId).on("click","#btnAddToCollection",function(a){a.preventDefault();var d=[];$(".app-search-item .ui-li-aside input[type=checkbox]:checked").each(function(f,c){d.push($(c).parent().parent().attr("data-html5-fileid"))});page_search.singleResult.addToCollection(d)});$(this.config.pageId).on("click","#btnRemoveFromCollection",function(a){a.preventDefault();var d=[];$(".app-search-item .ui-li-aside input[type=checkbox]:checked").each(function(f,c){d.push($(c).parent().parent().attr("data-html5-fileid"))});page_search.singleResult.removeFromCollection(d)});$(this.config.pageId).on("click","#btnSearch",function(a){app.store.localStorage.set("data-html5-themis-search-value",$("#txtSearch").val());page_search.updateSearchDiv($("#divSearchResults"))})},singleResult:{getFilters:function(h){var i=app.ni.element.div({id:"divFilter"}),j=app.ni.element.div({id:"divCollection"}),f=app.ni.element.div({id:"divSharing"}),g;i.append(app.ni.element.h2({text:app.lang.string("filter area","page.search")}));$.each(h,function(b,a){if(b.substring(0,2)==="by"){g=app.ni.select.single({id:b,classes:["app-search-filter"],attributes:{"data-inline":"true","data-mini":"true"}});g.append(app.ni.select.option({text:app.lang.string(b,"page.search"),value:""}));$.each(a,function(d,c){g.append(app.ni.select.option({text:c.title,value:c.title,selected:(a.length==1)?true:false}))});i.append(g)}});i.append(app.ni.element.a({id:"btnApplyFilter",text:app.lang.string("apply filter","page.search"),classes:["ui-btn","ui-btn-inline"]}));i.append(app.ni.element.a({id:"btnRemoveFilter",text:app.lang.string("remove filter","page.search"),classes:["ui-btn","ui-btn-inline"]}));f.append(app.ni.element.h2({text:app.lang.string("sharing area","page.search")}));f.append(app.ni.element.a({id:"btnShareSearchResult",text:app.lang.string("share search result","page.search"),classes:["ui-btn","ui-btn-inline"]}));j.append(app.ni.element.h2({text:app.lang.string("collection area","page.search")}));j.append(app.ni.element.a({id:"btnTagModeOn",text:app.lang.string("tag mode on","page.search"),classes:["ui-btn","ui-btn-inline"]}));j.append(app.ni.element.a({id:"btnTagModeOff",text:app.lang.string("tag mode off","page.search"),classes:["ui-btn","ui-btn-inline"]}));j.append(app.ni.element.a({id:"btnCreateCollection",text:app.lang.string("create new collection","page.search"),classes:["ui-btn","ui-btn-inline"]}));j.append(app.ni.element.a({id:"btnAddToCollection",text:app.lang.string("add to collection","page.search"),classes:["ui-btn","ui-btn-inline"]}));j.append(app.ni.element.a({id:"btnRemoveFromCollection",text:app.lang.string("remove from collection","page.search"),classes:["ui-btn","ui-btn-inline"]}));return $("<div>").append(i).append(f).append(j)},getThumbnail:function(d){var c;if((c=d.thumbnailUrl)!=undefined){return c.replace("###TOKEN###",encodeURIComponent(app.store.localStorage.get(plugin_WebServiceClient.config.headerToken.value))+"/"+d.ownerId)}else{if((c=app.img.getUrlById("search_"+d.type))!="search_"+d.type){return c}else{return false}}},getResultUrl:function(b){if(b.downloadUrl!=undefined){return b.downloadUrl.replace("###TOKEN###",encodeURIComponent(app.store.localStorage.get(plugin_WebServiceClient.config.headerToken.value))+"/"+b.ownerId)}else{return false}},getSearchDetails:function(d){var c=app.ni.element.div({classes:["app-themis-searchresult"]});c.append(app.ni.element.a({text:app.lang.string("share item","page.search"),classes:["ui-btn","ui-btn-inline"],attributes:{onclick:"javascript:page_search.singleResult.shareDocument("+JSON.stringify(d).split('"').join("'")+")"}}));c.append(app.ni.element.a({text:app.lang.string("close search details","page.search"),classes:["ui-btn","ui-btn-inline"],attributes:{onclick:"javascript:app.notify.close.alert()"}}));if(page_search.singleResult.getResultUrl(d)){c.append(app.ni.element.a({text:app.lang.string("open file in new browser window","page.search"),attributes:{href:"#",onclick:"javascript:window.open('"+page_search.singleResult.getResultUrl(d)+"','_blank', 'location=yes')"},classes:["ui-btn","ui-btn-inline"]}))}$.each(d,function(b,a){if(typeof a==="object"){$.each(a,function(h,g){c.append(app.ni.element.p({text:app.lang.string(h,"page.search")+": "+g}))})}else{c.append(app.ni.element.p({text:app.lang.string(b,"page.search")+": "+a}))}});return c},openDetails:function(b){app.notify.alert(page_search.singleResult.getSearchDetails(b),b.title,false,app.lang.string("back","actions"),function(){},50)},getSharingInputs:function(){var g=app.ni.element.div({classes:["app-themis-sharing"]}),e=app.ni.select.single({id:"selFriend"}),f,h;g.append(app.ni.text.text({id:"txtShareName",placeholder:app.lang.string("share name","page.search"),label:true,labelText:app.lang.string("sahre name","page.search"),container:false}));g.append(app.ni.text.text({id:"txtShareDescription",placeholder:app.lang.string("share description","page.search"),label:true,labelText:app.lang.string("share description","page.search"),container:false}));result=app.rc.getJson([["listFriendsSharing",{}],["listFriendsHeritage",{}]],false,3);f=result.listFriendsSharing;h=result.listFriendsHeritage;$.each(f,function(a,b){if(b.bmuUser){e.append(app.ni.select.option({text:b.name+" - "+b.description,value:b.bmuUserId,classes:["friend"]}))}});$.each(h,function(a,b){e.append(app.ni.select.option({text:b.name+" - "+b.description,value:b.bmuUserId,classes:["heritage"]}))});g.append(e);g.append(app.ni.text.date({id:"txtStartDate",placeholder:app.lang.string("start date","page.search"),label:true,labelText:app.lang.string("start date","page.search"),container:false}));g.append(app.ni.text.date({id:"txtEndDate",placeholder:app.lang.string("end date","page.search"),label:true,labelText:app.lang.string("end date","page.search"),container:false}));return g},getCollectionInputs:function(){var b=app.ni.element.div({classes:["app-themis-collections"]});b.append(app.ni.text.text({id:"txtCollectionName",placeholder:app.lang.string("collection name","page.search"),label:true,labelText:app.lang.string("collection name","page.search"),container:false}));b.append(app.ni.text.text({id:"txtCollectionDescription",placeholder:app.lang.string("collection description","page.search"),label:true,labelText:app.lang.string("collection description","page.search"),container:false}));return b},getAddToCollectionInputs:function(d){var f=app.ni.element.div({classes:["app-themis-collections"]}),e=$(app.ni.select.single({id:"cboCollections",name:"collections",label:true,labelText:app.lang.string("select collection","page.search")}));$.each(d,function(b,a){e.append(app.ni.select.option({text:a.name+" - "+a.description,value:a.collectionId}))});f.append(e);return f},getRemoveFromCollectionInputs:function(d){var f=app.ni.element.div({classes:["app-themis-collections"]}),e=$(app.ni.select.single({id:"cboCollections",name:"collections",label:true,labelText:app.lang.string("select collection","page.search")}));$.each(d,function(b,a){e.append(app.ni.select.option({text:a.name+" - "+a.description,value:a.collectionId}))});f.append(e);return f},shareDocument:function(b){app.notify.close.all().done(function(){app.notify.dialog(page_search.singleResult.getSharingInputs(),b.title,false,app.lang.string("share item","page.search"),app.lang.string("don't share item","page.share"),function(){var f,e,a;if($("#selFriend option:selected").hasClass("friend")){f="shareDocument"}else{if($("#selFriend option:selected").hasClass("heritage")){f="shareDocumentHeritage"}}e=($("#txtStartDate").val())?parseFloat(moment($("#txtStartDate").val()).format("x")):null;a=($("#txtEndDate").val())?parseFloat(moment($("#txtEndDate").val()).format("x")):null;app.rc.getJson(f,{withUserId:parseInt($("#selFriend option:selected").val()),policyValue:app.store.localStorage.get("data-html5-fileid"),name:$("#txtShareName").val(),description:$("#txtShareDescription").val(),lifespanstart:e,lifespanend:a},true).done(function(){app.notify.alert({text:app.lang.string("text share document done","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})}).fail(function(){app.notify.alert({text:app.lang.string("text share document fail","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})})},function(){},50)})},createCollection:function(b){app.notify.close.all().done(function(){app.notify.dialog(page_search.singleResult.getCollectionInputs(),app.lang.string("create collection","page.search"),false,app.lang.string("create collection","page.search"),app.lang.string("cancel","page.share"),function(){app.rc.getJson("createCollection",{documentIds:b,name:$("#txtCollectionName").val(),description:$("#txtCollectionDescription").val()},true).done(function(){app.notify.alert({text:app.lang.string("text create collection done","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})}).fail(function(){app.notify.alert({text:app.lang.string("text create collection fail","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})})},function(){},50)})},removeFromCollection:function(b){app.notify.close.all().done(function(){app.rc.getJson("getCollections",{},true).done(function(a){app.notify.dialog(page_search.singleResult.getAddToCollectionInputs(a),app.lang.string("remove from collection","page.search"),false,app.lang.string("remove from collection","page.search"),app.lang.string("cancel","page.share"),function(){app.rc.getJson("removeFromCollection",{documentIds:b,collId:$("#cboCollections option:selected").val(),collectionId:$("#cboCollections option:selected").val()},true).done(function(){app.notify.alert({text:app.lang.string("text remove from collection done","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})}).fail(function(){app.notify.alert({text:app.lang.string("text remove from collection fail","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})})},function(){},50)}).fail(function(){app.notify.alert({text:app.lang.string("text get collection fail","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})})})},addToCollection:function(b){app.notify.close.all().done(function(){app.rc.getJson("getCollections",{},true).done(function(a){app.notify.dialog(page_search.singleResult.getAddToCollectionInputs(a),app.lang.string("add to collection","page.search"),false,app.lang.string("add to collection","page.search"),app.lang.string("cancel","page.share"),function(){app.rc.getJson("addToCollection",{documentIds:b,collId:$("#cboCollections option:selected").val(),collectionId:$("#cboCollections option:selected").val()},true).done(function(){app.notify.alert({text:app.lang.string("text add to collection done","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})}).fail(function(){app.notify.alert({text:app.lang.string("text add to collection fail","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})})},function(){},50)}).fail(function(){app.notify.alert({text:app.lang.string("text get collecton fail","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})})})},shareDocumentGroup:function(){app.notify.close.all().done(function(){app.notify.dialog(page_search.singleResult.getSharingInputs(),app.lang.string("share search result","page.search"),false,app.lang.string("share item","page.search"),app.lang.string("don't share item","page.share"),function(){var h=[],g,f;$(".app-search-item").each(function(b,a){h.push($(a).attr("data-html5-fileid"))});var e;if($("#selFriend option:selected").hasClass("friend")){e="shareDocumentGroup"}else{if($("#selFriend option:selected").hasClass("heritage")){e="shareDocumentGroupHeritage"}}g=($("#txtStartDate").val())?parseFloat(moment($("#txtStartDate").val()).format("x")):null;f=($("#txtEndDate").val())?parseFloat(moment($("#txtEndDate").val()).format("x")):null;app.rc.getJson(e,{withUserId:parseInt($("#selFriend option:selected").val()),policyValue:JSON.stringify(h).split('"').join(""),name:$("#txtShareName").val(),description:$("#txtShareDescription").val(),lifespanstart:g,lifespanend:f},true).done(function(){app.notify.alert({text:app.lang.string("text share document group done","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})}).fail(function(){app.notify.alert({text:app.lang.string("text share document group fail","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})})},function(){},50)})}},updateSearchDiv:function(d){app.notify.loader.bubbleDiv(true,app.lang.string("loadingText","page.search"),app.lang.string("loadingHeadline","page.search"));var c=app.rc.getJson("searchWithFilters",{query:app.store.localStorage.get("data-html5-themis-search-value"),source:($("#bySource").length>0)?$("#bySource option:selected").val():"",type:($("#byType").length>0)?$("#byType option:selected").val():"",job:($("#byJob").length>0)?$("#byJob option:selected").val():"",owner:($("#byOwner").length>0)?$("#byOwner option:selected").val():"",tag:($("#byTag").length>0)?$("#byTag option:selected").val():"",offset:0,maxResults:1000},true);d.empty();c.fail(function(){app.notify.alert(app.lang.string("search_error","texts"),false,app.lang.string("search","headlines"),app.lang.string("ok","actions"))});c.done(function(a){var b=$(app.template.get("listA","responsive"));d.append(page_search.singleResult.getFilters(a));$.each(a.files,function(g,h){b.append(app.ni.list.thumbnail({href:"#",imageSrc:(page_search.singleResult.getThumbnail(h))?page_search.singleResult.getThumbnail(h):" ",title:(h.isSharing)?app.lang.string("shared item","page.search"):app.lang.string("own item","page.search"),headline:h.title,text:h.preview,classes:["job","app-search-item"],attributes:{onclick:"page_search.singleResult.openDetails("+JSON.stringify(h).split('"').join("'")+")","data-html5-datasink":h.datasink,"data-html5-datasource":h.datasource,"data-html5-fileid":h.fileId,"data-html5-issharing":h.isSharing,"data-html5-jobname":h.jobName,"data-html5-ownerid":h.ownerId,"data-html5-properties-destiantion":h.properties.destiantion,"data-html5-properties-path":h.properties.path,"data-html5-properties-source":h.properties.source,"data-html5-timestamp":h.timestamp,"data-html5-title":h.title,"data-html5-type":h.type}}))});d.append(b);app.help.jQM.enhance(d)});c.always(function(){app.notify.loader.remove()})},functions:{},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12)}}};var config_search={name:"search",shortname:"search",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_settings={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(g){app.debug.alert("page_"+this.config.name+".creator()",10);try{app.debug.alert("page_"+this.config.name+".creator()",10);var h=g.find("div[data-role=header]");var i=g.find("div[data-role=content]");var f=g.find("div#nav-panel");i.append(app.ni.element.h1({text:app.lang.string("settings","headlines")}));i.append(app.ni.element.a({id:"btnClearHtml5Storage",text:app.lang.string("clear_html5_storage","actions"),classes:["ui-btn"]}));success=true}catch(j){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(j,null,4),50);app.debug.log(JSON.stringify(j,null,4));success=false}return success},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(d){app.debug.alert("page_"+this.config.name+".setEvents()",10);try{$(document).on("click","#btnClearHtml5Storage",function(){app.notify.alert(app.lang.string("clear_html5_storage","notifications"),app.lang.string("clear_html5_storage","headlines"),app.lang.string("clear_html5_storage","headlines"),page_settings.redirectHome);app.notify.add.alert(app.lang.string("logout","notifications"),app.lang.string("logout","headlines"),app.lang.string("logout","headlines"))});success=true}catch(c){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(c,null,4),50);app.debug.log(JSON.stringify(c,null,4));success=false}return success},redirectHome:function(){app.store.localStorage.clear();app.help.navigation.redirect("index.html")},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_settings={name:"settings",shortname:"settings",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_share_backup={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(g){app.debug.alert("page_"+this.config.name+".creator()",10);var h=g.find("div[data-role=header]");var j=g.find("div[data-role=content]");var f=g.find("div#nav-panel");app.notify.loader.bubbleDiv(true,"",app.lang.string("loading","headlines"));var i=app.rc.getJson([["ownedShares",{}],["ownedSharesHeritage",{}],["incomingShares",{}],["getCollections",{}]],true);j.append(app.ni.element.h1({text:app.lang.string("share_backup","headlines")}));i.done(function(a){var b=a.incomingShares,l=a.ownedShares,d=a.ownedSharesHeritage,e=a.getCollections;j.append(app.ni.element.h2({text:app.lang.string("my incoming shares","headlines"),styles:{clear:"both"}}));var c=$(app.template.get("listA","responsive"));$.each(b,function(n,k){c.append(app.ni.list.thumbnail({href:"#",imageSrc:app.img.getUrlById("incoming_"+k.policy+"_"+k.approvedBySharingpartner),title:app.lang.string("date","page.share_backup")+" "+date("d.m.Y",k.policyCreationDate/1000),headline:(k.name!=undefined)?k.name:app.lang.string(k.policy,"page.share_backup"),text:(k.description!=undefined)?k.description:"no description for backup",classes:["incoming-share"],attributes:{json:JSON.stringify(k).split('"').join("'"),"data-html5-themis-id":k.id,"data-html5-themis-fromuserid":k.fromUserID,"data-html5-themis-withuserid":k.withUserID,"data-html5-themis-policy":k.policy,"data-html5-themis-searchelementid":k.sharedElementID,"data-html5-themis-policycreationdate":k.policyCreationDate,"data-html5-themis-numberOfSharedDocuments":k.numberOfSharedDocuments,"data-html5-themis-name":k.name,"data-html5-themis-approvedBySharingpartner":k.approvedBySharingpartner}}))});app.notify.loader.remove();j.append(c);j.append(app.ni.element.h2({text:app.lang.string("my owned shares","headlines"),styles:{clear:"both"}}));c=$(app.template.get("listA","responsive"));$.each(l,function(k,n){c.append(app.ni.list.thumbnail({href:"#",imageSrc:app.img.getUrlById("incoming_"+n.policy+"_"+n.approvedBySharingpartner),title:app.lang.string("date","page.share_backup")+" "+date("d.m.Y",n.policyCreationDate/1000),headline:(n.name!=undefined)?n.name:app.lang.string(n.policy,"page.share_backup"),text:(n.description!=undefined)?n.description:"no description for backup",classes:["owned-share","friend"],attributes:{json:JSON.stringify(n).split('"').join("'"),"data-html5-revoketype":"heritage","data-html5-themis-id":n.id,"data-html5-themis-fromuserid":n.fromUserID,"data-html5-themis-withuserid":n.withUserID,"data-html5-themis-policy":n.policy,"data-html5-themis-searchelementid":n.sharedElementID,"data-html5-themis-policycreationdate":n.policyCreationDate,"data-html5-themis-numberOfSharedDocuments":n.numberOfSharedDocuments,"data-html5-themis-name":n.name,"data-html5-themis-approvedBySharingpartner":n.approvedBySharingpartner}}))});j.append(c);j.append(app.ni.element.h2({text:app.lang.string("my owned shares heritage","headlines"),styles:{clear:"both"}}));c=$(app.template.get("listA","responsive"));$.each(d,function(k,n){c.append(app.ni.list.thumbnail({href:"#",imageSrc:app.img.getUrlById("incoming_"+n.policy+"_"+n.approvedBySharingpartner),title:app.lang.string("date","page.share_backup")+" "+date("d.m.Y",n.policyCreationDate/1000),headline:(n.name!=undefined)?n.name:app.lang.string(n.policy,"page.share_backup"),text:(n.description!=undefined)?n.description:"no description for backup",classes:["owned-share","heritage"],attributes:{json:JSON.stringify(n).split('"').join("'"),"data-html5-revoketype":"heritage","data-html5-themis-id":n.id,"data-html5-themis-fromuserid":n.fromUserID,"data-html5-themis-withuserid":n.withUserID,"data-html5-themis-policy":n.policy,"data-html5-themis-searchelementid":n.sharedElementID,"data-html5-themis-policycreationdate":n.policyCreationDate,"data-html5-themis-numberOfSharedDocuments":n.numberOfSharedDocuments,"data-html5-themis-name":n.name,"data-html5-themis-approvedBySharingpartner":n.approvedBySharingpartner}}))});j.append(c);j.append(app.ni.element.h2({text:app.lang.string("my collections","headlines"),styles:{clear:"both"}}));c=$(app.template.get("listA","responsive"));$.each(e,function(n,k){c.append(app.ni.list.thumbnail({href:"#",imageSrc:app.img.getUrlById("collection"),title:app.lang.string("date","page.share_backup")+" "+date("d.m.Y",k.collectionCreationDate/1000),headline:(k.name!=undefined)?k.name:app.lang.string(k.policy,"page.share_backup"),text:(k.description!=undefined)?k.description:"test test test",classes:["collection"],attributes:{json:JSON.stringify(k).split('"').join("'"),"data-html5-collectionId":k.collectionId}}))});j.append(c);app.notify.loader.remove();app.help.jQM.enhance(j)});i.fail(function(a){app.notify.loader.remove();alert("ws error: "+a)})},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10);$(this.config.pageId).on("click",".owned-share",function(f){var a=JSON.parse($(this).attr("json").split("'").join('"')),e=page_share_backup.functions.ownedShareOperatios(a);app.notify.alert(e,false,app.lang.string("share details","page.share_backup"),app.lang.string("close details","page.share_backup"),false,50)});$(this.config.pageId).on("click",".incoming-share",function(d){var a=JSON.parse($(this).attr("json").split("'").join('"'));app.notify.alert(page_share_backup.functions.incomingShareOperatios(a),false,app.lang.string("share details","page.share_backup"),app.lang.string("close details","page.share_backup"),false,50)});$(this.config.pageId).on("click",".app-share-accept",function(a){app.notify.close.all().done(function(){app.rc.getJson("approveIncomingShare",{policyID:app.store.localStorage.get("data-html5-themis-id")},true).done(function(){app.notify.alert({text:app.lang.string("text accept share done","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})}).fail(function(){app.notify.alert({text:app.lang.string("text accept share fail","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})})})});$(this.config.pageId).on("click",".app-share-decline",function(a){app.notify.close.all().done(function(){app.rc.getJson("declineIncomingShare",{policyID:app.store.localStorage.get("data-html5-themis-id")},true).done(function(){app.notify.alert({text:app.lang.string("text decline share done","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})}).fail(function(){app.notify.alert({text:app.lang.string("text decline share fail","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})})})});$(this.config.pageId).on("storagefilled",".app-share-delete",function(a){app.notify.close.all().done(function(){var d;if(app.store.localStorage.get("data-html5-revoketype")=="heritage"){d="deleteOwnShareHeritage"}else{if(app.store.localStorage.get("data-html5-revoketype")=="friends"){d="deleteOwnShare"}}app.rc.getJson(d,{policyID:app.store.localStorage.get("data-html5-themis-id")},true).done(function(){app.notify.alert({text:app.lang.string("text delete share done","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})}).fail(function(){app.notify.alert({text:app.lang.string("text delete share fail","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})})})});$(this.config.pageId).on("click",".app-collection-share",function(a){plugin_Notification.functions.dialog(page_search.singleResult.getSharingInputs(),false,app.lang.string("share collection","page.share_backup"),app.lang.string("cancel","page.share_backup"),app.lang.string("share collection","page.share_backup"),false,function(){var g,f,h;if($("#selFriend option:selected").hasClass("friend")){g="shareCollection"}else{if($("#selFriend option:selected").hasClass("heritage")){g="shareCollectionHeritage"}}f=($("#txtStartDate").val())?parseFloat(moment($("#txtStartDate").val()).format("x")):null;h=($("#txtEndDate").val())?parseFloat(moment($("#txtEndDate").val()).format("x")):null;app.rc.getJson(g,{withUserId:parseInt($("#selFriend option:selected").val()),policyValue:app.store.localStorage.get("data-html5-collectionId"),name:$("#txtShareName").val(),description:$("#txtShareDescription").val(),lifespanstart:f,lifespanend:h},true).done(function(){app.notify.alert({text:app.lang.string("text share collection done","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})}).fail(function(){app.notify.alert({text:app.lang.string("text share collection fail","sharing"),headline:app.lang.string("headline sharing","sharing"),button:app.lang.string("Ok","sharing"),callbackButton:false,delayInMs:0})})},80)});$(this.config.pageId).on("click",".collection",function(a){var e=JSON.parse($(this).attr("json").split("'").join('"')),f=JSON.stringify(e.documentIds).replace("[","").replace("]","").split(",").join(" OR ").split('"').join("");app.store.localStorage.set("data-html5-themis-search-value",f);app.notify.alert(page_share_backup.functions.collectionOperations(e),false,app.lang.string("collection details","page.share_backup"),app.lang.string("close details","page.share_backup"),false,50)});$(this.config.pageId).on("click",".app-collection-view",function(a){app.nav.redirect("search.html","none")})},functions:{incomingShareOperatios:function(d){var c=app.ni.element.div({});if(!d.approvedBySharingpartner){c.append(app.ni.element.a({classes:["ui-btn","ui-btn-inline","app-share-accept"],text:app.lang.string("accept share","page.share_backup")}))}c.append(app.ni.element.a({classes:["ui-btn","ui-btn-inline","app-share-decline"],text:app.lang.string("decline share","page.share_backup")}));c.append(page_share_backup.functions.getShareDetails(d));return c},ownedShareOperatios:function(d){var c=app.ni.element.div({});c.append(app.ni.element.a({classes:["ui-btn","ui-btn-inline","app-share-delete"],text:app.lang.string("revoke share","page.share_backup")}));c.append(page_share_backup.functions.getShareDetails(d));return c},collectionOperations:function(d){var c=app.ni.element.div({});c.append(app.ni.element.a({classes:["ui-btn","ui-btn-inline","app-collection-share"],text:app.lang.string("share collection","page.share_backup")}));c.append(app.ni.element.a({classes:["ui-btn","ui-btn-inline","app-collection-view"],text:app.lang.string("view collection","page.share_backup")}));c.append(page_share_backup.functions.getCollectionDetails(d));return c},getCollectionDetails:function(d){var c=app.ni.element.div({});$.each(d,function(b,a){c.append(app.ni.element.p({text:b+": "+a}))});return c},getShareDetails:function(d){var c=app.ni.element.div({});$.each(d,function(b,a){c.append(app.ni.element.p({text:b+": "+a}))});return c}},events:{pagebeforechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforechange()",12)},pagebeforecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforecreate()",12)},pagebeforehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforehide()",12)},pagebeforeload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeload()",12)},pagebeforeshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagebeforeshow()",12)},pagechange:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechange()",12)},pagechangefailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagechangefailed()",12)},pagecreate:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagecreate()",12)},pagehide:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pagehide()",12)},pageinit:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageinit()",12)},pageload:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageload()",12)},pageloadfailed:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageloadfailed()",12)},pageremove:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageremove()",12)},pageshow:function(c,d){app.debug.alert("page_"+$(d).attr("id")+".pageshow()",12)}}};var config_share_backup={name:"share_backup",shortname:"share_backup",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_start={config:null,elements:{},constructor:function(){var b=$.Deferred();b.resolve();return b.promise()},creator:function(b){app.debug.alert("page_"+this.config.name+".creator()",10);initialisationPanel.show("")},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){alert("WS fails: "+JSON.stringify(this.result))},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10)},functions:{},events:{pagebeforechange:function(c,d){},pagebeforecreate:function(c,d){},pagebeforehide:function(c,d){},pagebeforeload:function(c,d){},pagebeforeshow:function(c,d){},pagechange:function(c,d){},pagechangefailed:function(c,d){},pagecreate:function(c,d){},pagehide:function(c,d){initialisationPanel.hide()},pageinit:function(c,d){},pageload:function(c,d){},pageloadfailed:function(c,d){},pageremove:function(c,d){},pageshow:function(c,d){window.setTimeout(function(){if(app.info.firstUse()===true){app.info.firstUse(false);app.help.navigation.redirect(app.config.startPage_firstStart,"slideup")}else{if(app.sess.loggedIn()){app.help.navigation.redirect(app.config.startPage_loggedIn,"slideup")}else{app.help.navigation.redirect(app.config.startPage,"slideup")}}},1000)}}};var config_start={name:"start",shortname:"start",template:"",useKeepAlive:true,loginObligate:false,isGlobalPage:false,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_startToken={config:null,include:null,include_once:null,elements:null,constructor:function(){app.debug.trace("page_startToken.constructor()");var b=$.Deferred();b.resolve();return b.promise()},creator:function(d){app.debug.trace("page_startToken.creator()");var c=d.find("div[data-role=content]");c.append("<h1>Erbe holen</h1>");c.append(app.ni.element.a({id:"btnDeadManSwitch",text:"Erbe holen",classes:["ui-btn","ui-btn-inline"]}))},async:{promise:null,result:null,elements:null,creator:function(c){app.debug.trace("page_startToken.async.creator()");var d=$.Deferred();d.resolve();return d.promise()},call:function(b){app.debug.trace("page_startToken.async.call()");return app.rc.getJson()},done:function(b){app.debug.trace("page_startToken.async.done()")},fail:function(b){app.debug.trace("page_startToken.async.fail()");alert("WS fails: "+JSON.stringify(this.result))},always:function(b){app.debug.trace("page_startToken.async.always()")},abort:function(b){app.debug.trace("page_startToken.async.abort()")}},setEvents:function(b){app.debug.trace("page_startToken.setEvents()");$(this.config.pageId).on("click","#btnDeadManSwitch",function(){app.rc.getJson("deadManSwitch",{},true).done(function(){alert("done")}).fail(function(){alert("fail")}).always()})},functions:{},events:{pagebeforechange:function(c,d){app.debug.trace("page_startToken.pagebeforechange()")},pagebeforecreate:function(c,d){app.debug.trace("page_startToken.pagebeforecreate()")},pagebeforehide:function(c,d){app.debug.trace("page_startToken.pagebeforehide()")},pagebeforeload:function(c,d){app.debug.trace("page_startToken.pagebeforeload()")},pagebeforeshow:function(c,d){app.debug.trace("page_startToken.pagebeforeshow()")},pagechange:function(c,d){app.debug.trace("page_startToken.pagechange()")},pagechangefailed:function(c,d){app.debug.trace("page_startToken.pagechangefailed()")},pagecreate:function(c,d){app.debug.trace("page_startToken.pagecreate()")},pagehide:function(c,d){app.debug.trace("page_startToken.pagehide()")},pageinit:function(c,d){app.debug.trace("page_startToken.pageinit()")},pageload:function(c,d){app.debug.trace("page_startToken.pageload()")},pageloadfailed:function(c,d){app.debug.trace("page_startToken.pageloadfailed()")},pageremove:function(c,d){app.debug.trace("page_startToken.pageremove()")},pageshow:function(c,d){app.debug.trace("page_startToken.pageshow()")}}};var config_startToken={name:"startToken",shortname:"startToken",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_timelineSearch={config:null,include:null,include_once:null,elements:null,constructor:function(){app.debug.trace("page_timelineSearch.constructor()");var b=$.Deferred();b.resolve();return b.promise()},creator:function(i){app.debug.trace("page_timelineSearch.creator()");var m=$("div[data-role=content]");var n=app.ni.form.form({id:"frmSearch",attributes:{action:"#","data-ajax":"false"},label:false});n.append(app.ni.text.text({id:"txtSearch",placeholder:(app.store.localStorage.get("data-html5-themis-timelinesearch-value"))?app.store.localStorage.get("data-html5-themis-timelinesearch-value"):app.lang.string("search","labels"),label:false,labelText:app.lang.string("search","labels"),container:false}));n.append(app.ni.element.a({id:"btnSearch",text:app.lang.string("search","actions"),attributes:{href:"#"},classes:["ui-btn"],styles:{display:"none"}}));m.append(n);var l=app.ni.element.div({id:"divStsSidebar"});var j=app.ni.element.div({id:"divStsMap"});l.append(j);var k=app.ni.element.div({id:"divStsHistogram"});l.append(k);m.append(l);var h=app.ni.element.div({id:"divStsResultList"});m.append(h);this.spatioTemporalUI=new SpatioTemporalUI({resultList:h,map:j,timeHistogram:k,imagePath:"../ext/leaflet/images/",token:app.store.localStorage.get(plugin_WebServiceClient.config.headerToken.value)});if(app.store.localStorage.get("data-html5-themis-timelinesearch-value")!==null){window.setTimeout(function(){page_timelineSearch.update()},1000)}},async:{promise:null,result:null,elements:null,creator:function(c){app.debug.trace("page_timelineSearch.async.creator()");var d=$.Deferred();d.resolve();return d.promise()},call:function(b){app.debug.trace("page_timelineSearch.async.call()");return app.rc.getJson()},done:function(b){app.debug.trace("page_timelineSearch.async.done()")},fail:function(b){app.debug.trace("page_timelineSearch.async.fail()");alert("WS fails: "+JSON.stringify(this.result))},always:function(b){app.debug.trace("page_timelineSearch.async.always()")},abort:function(b){app.debug.trace("page_timelineSearch.async.abort()")}},setEvents:function(b){app.debug.trace("page_timelineSearch.setEvents()");jQuery(document).scroll(function(){var a=jQuery(window).scrollTop(),d=jQuery("#divStsResultList").offset().top;if(d>a){jQuery("#divStsSidebar").css("top",d-a)}else{jQuery("#divStsSidebar").css("top",10)}});jQuery(this.config.pageId).on("submit","#frmSearch",function(a){a.preventDefault();app.store.localStorage.set("data-html5-themis-timelinesearch-value",jQuery("#txtSearch").val());page_timelineSearch.update()})},update:function(){app.rc.getJson("searchWithFilters",{query:app.store.localStorage.get("data-html5-themis-timelinesearch-value"),source:"",type:"",job:"",owner:"",tag:"",offset:0,maxResults:1500},true).done(function(b){this.spatioTemporalUI.update(b)}.bind(this))},functions:{},events:{pagebeforechange:function(c,d){app.debug.trace("page_timelineSearch.pagebeforechange()")},pagebeforecreate:function(c,d){app.debug.trace("page_timelineSearch.pagebeforecreate()")},pagebeforehide:function(c,d){app.debug.trace("page_timelineSearch.pagebeforehide()")},pagebeforeload:function(c,d){app.debug.trace("page_timelineSearch.pagebeforeload()")},pagebeforeshow:function(c,d){app.debug.trace("page_timelineSearch.pagebeforeshow()")},pagechange:function(c,d){app.debug.trace("page_timelineSearch.pagechange()")},pagechangefailed:function(c,d){app.debug.trace("page_timelineSearch.pagechangefailed()")},pagecreate:function(c,d){app.debug.trace("page_timelineSearch.pagecreate()")},pagehide:function(c,d){app.debug.trace("page_timelineSearch.pagehide()")},pageinit:function(c,d){app.debug.trace("page_timelineSearch.pageinit()")},pageload:function(c,d){app.debug.trace("page_timelineSearch.pageload()")},pageloadfailed:function(c,d){app.debug.trace("page_timelineSearch.pageloadfailed()")},pageremove:function(c,d){app.debug.trace("page_timelineSearch.pageremove()")},pageshow:function(c,d){app.debug.trace("page_timelineSearch.pageshow()")}}};var config_timelineSearch={name:"timelineSearch",shortname:"timelineSearch",template:"",asyncLoading:false,useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0};var page_usersettings={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(g){app.debug.alert("page_"+this.config.name+".creator()",10);try{app.debug.alert("page_"+this.config.name+".creator()",10);var h=g.find("div[data-role=header]");var i=g.find("div[data-role=content]");var f=g.find("div#nav-panel");i.append(app.ni.element.h1({text:app.lang.string("user_settings","headlines")}));success=true}catch(j){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(j,null,4),50);app.debug.log(JSON.stringify(j,null,4));success=false}return success},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10)},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_usersettings={name:"usersettings",shortname:"usersettings",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_verify_email={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(g){app.debug.alert("page_"+this.config.name+".creator()",10);try{var h=g.find("div[data-role=header]");var i=g.find("div[data-role=content]");var f=g.find("div#nav-panel");i.append(app.ni.element.h1({text:app.lang.string("verify_email","headlines")}));i.append(app.ni.element.p({text:app.lang.string("verify_email","texts")}));i.append(app.ni.text.text({id:"txtVerificationKey",placeholder:app.lang.string("verification_key","labels"),label:true,labelText:app.lang.string("verification_key","labels"),container:true}));i.append(app.ni.button.button({id:"btnVerifyEmail",placeholder:app.lang.string("verify_email","labels"),label:true,labelText:app.lang.string("verify_email","labels"),container:true,value:app.lang.string("verify_email","actions")}));i.append(app.ni.element.a({id:"lnkResendVerificationKey",text:app.lang.string("resend_verification_key","actions"),attributes:{href:"#"}}));success=true}catch(j){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(j,null,4),50);app.debug.log(JSON.stringify(j,null,4));success=false}return success},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(d){app.debug.alert("page_"+this.config.name+".setEvents()",10);try{$(d).on("click","#btnVerifyEmail",function(){app.debug.alert("page_"+page_verify_email.config.name+" #btnVerifyEmail click",25);if((json=app.rc.getJson("verifyEmail",{verificationKey:d.find("#txtVerificationKey").val()}))!=false){if(json.username=="success"){app.store.localStorage.set("data-html5-themis-activated",true);$.mobile.changePage("start.html")}else{app.notify.alert(app.lang.string("bad_verify_email","notifications"),app.lang.string("verify_email","headlines"),app.lang.string("","headlines"))}}else{app.notify.alert(app.lang.string("bad_verify_email","notifications"),app.lang.string("verify_email","headlines"),app.lang.string("","headlines"))}});$(d).on("click","#lnkResendVerificationKey",function(){app.debug.alert("page_"+page_verify_email.config.name+" #lnkResendVerificationKey click",25);if((json=app.rc.getJson("newVerficiationEmail",{username:app.store.localStorage.get("data-html5-themis-username")}))!=false){if(json.username){app.notify.alert(app.lang.string("varification_key_resend","notifications"),app.lang.string("verify_email","headlines"),app.lang.string("verify_email","headlines"))}else{alert("Email nicht gesendet")}}});success=true}catch(c){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(c,null,4),50);app.debug.log(JSON.stringify(c,null,4));success=false}return success},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_verify_email={name:"verify_email",shortname:"verify_email",template:"",useKeepAlive:true,loginObligate:false,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var page_zip_archive={config:null,elements:null,constructor:function(){app.debug.alert("page_"+this.config.name+".constructor()",10);var b=$.Deferred();b.resolve();return b.promise()},creator:function(g){app.debug.alert("page_"+this.config.name+".creator()",10);try{app.debug.alert("page_"+this.config.name+".creator()",10);var h=g.find("div[data-role=header]");var i=g.find("div[data-role=content]");var f=g.find("div#nav-panel");i.append(app.ni.element.h1({text:app.lang.string("zip_archive","headlines")}));success=true}catch(j){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(j,null,4),50);app.debug.log(JSON.stringify(j,null,4));success=false}return success},async:{promise:null,result:null,elements:null,creator:function(c){var d=$.Deferred();d.resolve();return d.promise()},call:function(b){return app.rc.getJson()},done:function(b){},fail:function(b){},always:function(b){},abort:function(b){}},setEvents:function(b){app.debug.alert("page_"+this.config.name+".setEvents()",10)},functions:{},events:{pagebeforechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagebeforeshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagebeforeshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechange:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechange()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagechangefailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagechangefailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagecreate:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagecreate()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pagehide:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pagehide()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageinit:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageinit()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageload:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageload()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageloadfailed:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageloadfailed()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageremove:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageremove()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success},pageshow:function(f,e){app.debug.alert("page_"+$(e).attr("id")+".pageshow()",12);try{success=true}catch(d){app.debug.alert("Fatal exception!\n\n"+JSON.stringify(d,null,4),50);app.debug.log(JSON.stringify(d,null,4));success=false}return success}}};var config_zip_archive={name:"zip_archive",shortname:"zip_archive",template:"",useKeepAlive:true,loginObligate:true,isGlobalPage:true,contentRefresh:false,contentRefreshInterval:0,asyncLoading:false};var pages={config:null,pageNames:[],refreshInterval:null,history:[],constructor:function(){var a=$.Deferred();startup.addFunction("lapstone is calling the plugins' pages loaded function",pages.callPluginsPagesLoaded,"");startup.addFunction("lapstone is calling the pages' setEvents() function",pages.setEvents,"");startup.addFunction("lapstone is verifying the pages' properties",pages.verifyPages,"");startup.addFunction("lapstone is including external scripts for pages",pages.include,"");startup.addFunction("lapstone is loading the pages",pages.loadPages,"");startup.addFunction("lapstone is verifying the pages' names",pages.verifyPageNames,"");startup.addFunction("lapstone is loading the pages' configuration",pages.loadPageConfig,"");startup.addFunction("lapstone is loading the script for global pages",globalLoader.AsyncScriptLoader,"../files/globalPage.js");a.resolve();return a.promise()},include:function(){var a=$.Deferred(),c,b=Array(),e,d=true;$.each(pages.pageNames,function(g,f){app.debug.debug("pages.include() - processing page: "+f);c=window["page_"+f];if(c.include_once!=undefined){if(Array.isArray(c.include_once)){d=false;$.each(c.include_once,function(i,j){var h="../js/page/include/"+j;app.debug.debug("pages.include() - including: "+h);b.push(globalLoader.AsyncScriptLoader(h))});e=$.when.apply($,b);e.done(function(){app.debug.debug("pages.include() - including done");a.resolve()}).fail(function(){app.debug.debug("pages.include() - including: fails");a.reject()})}}});if(d){a.resolve()}return a.promise()},callPluginsPagesLoaded:function(){var a=$.Deferred();$.each(plugins.pluginNames,function(b,c){window["plugin_"+c].pagesLoaded()});a.resolve();return a.promise()},loadPageConfig:function(){var a=$.Deferred(),b;if(app.config.min){pages.config=config_json;a.resolve()}else{b=globalLoader.AsyncJsonLoader("../js/page/pages.json");b.done(function(c){pages.config=c;a.resolve()});b.fail(function(){a.reject()})}return a.promise()},verifyPageNames:function(){var a=$.Deferred();a.resolve();return a.promise()},verifyPages:function(){var a=$.Deferred(),b;$.each(pages.pageNames,function(d,c){b=window["page_"+c];if(b.config===undefined){console.warn("The page: "+c+" has no 'config' property.")}else{if(b.config.name===undefined){console.warn("The page: "+c+" has no 'config.name' property.")}if(b.config.shortname===undefined){console.warn("The page: "+c+" has no 'config.shortname' property.")}if(b.config.template===undefined){console.warn("The page: "+c+" has no 'config.template' property.")}if(b.config.useKeepAlive===undefined){console.warn("The page: "+c+" has no 'config.useKeepAlive' property.")}if(b.config.loginObligate===undefined){console.warn("The page: "+c+" has no 'config.loginObligate' property.")}if(b.config.isGlobalPage===undefined){console.warn("The page: "+c+" has no 'config.isGlobalPage' property.")}if(b.config.contentRefresh===undefined){console.warn("The page: "+c+" has no 'config.contentRefresh' property.")}if(b.config.contentRefreshInterval===undefined){console.warn("The page: "+c+" has no 'config.contentRefreshInterval' property.")}if(b.config.asyncLoading===undefined){console.warn("The page: "+c+" has no 'config.asyncLoading' property.")}}if(b.elements===undefined){console.warn("The page: "+c+" has no 'elements' property.")}if(b.constructor===undefined){console.warn("The page: "+c+" has no 'constructor' property.")}if(b.creator===undefined){console.warn("The page: "+c+" has no 'creator' property.")}if(b.async===undefined){console.warn("The page: "+c+" has no 'async' property.")}else{if(b.async.promise===undefined){console.warn("The page: "+c+" has no 'async.promise' property.")}if(b.async.result===undefined){console.warn("The page: "+c+" has no 'async.result' property.")}if(b.async.elements===undefined){console.warn("The page: "+c+" has no 'async.elements' property.")}if(b.async.creator===undefined){console.warn("The page: "+c+" has no 'async.creator' property.")}if(b.async.call===undefined){console.warn("The page: "+c+" has no 'async.call' property.")}if(b.async.done===undefined){console.warn("The page: "+c+" has no 'async.done' property.")}if(b.async.fail===undefined){console.warn("The page: "+c+" has no 'async.fail' property.")}if(b.async.always===undefined){console.warn("The page: "+c+" has no 'async.always' property.")}if(b.async.abort===undefined){console.warn("The page: "+c+" has no 'async.abort' property.")}}if(b.setEvents===undefined){console.warn("The page: "+c+" has no 'setEvents' property.")}if(b.functions===undefined){console.warn("The page: "+c+" has no 'functions' property.")}});a.resolve();return a.promise()},loadPageConfiguration:function(b){var a=$.Deferred(),c;if(app.config.min){window["page_"+b].config=window["config_"+b];a.resolve()}else{c=globalLoader.AsyncJsonLoader("../js/page/page."+b+".json");c.done(function(d){window["page_"+b].config=d;a.resolve()});c.fail(function(){a.reject()})}return a.promise()},onPageLoaded:function(b){var a=$.Deferred(),d,c;if(window["page_"+b]==undefined){alert("Fatal error: Page class is not defined: page_"+b);return}c=pages.loadPageConfiguration(b);c.done(function(){if(window["page_"+b].config.name==undefined){alert("Fatal error: The property 'name' is not defined in JSON file: ../js/page."+b+".json");return false}if(window["page_"+b].config.shortname==undefined){alert("Fatal error: The property 'shortname' is not defined in JSON file: ../js/page."+b+".json");return false}d=window["page_"+b].constructor();d.done(function(){window["page_"+b]["config"]["page"]=b;window["page_"+b]["config"]["pageId"]="#"+b;app[window["page_"+b].config.shortname]=window["page_"+b].functions;pages.pageNames.push(b);a.resolve()});d.fail(function(){a.reject()})});c.fail(function(){a.reject()});return a.promise()},loadPages:function(){var a=$.Deferred(),d=Array(),c,e=Array(),b;$.each(pages.config,function(f,g){if(app.config.min){d.push(pages.onPageLoaded(f))}else{d.push(globalLoader.AsyncScriptLoader("../js/page/page."+f+".js"))}});c=$.when.apply($,d);if(app.config.min){c.done(function(){pages.callPluginPageEventFunctions();a.resolve()});c.fail(function(){a.reject()})}else{c.done(function(){$.each(pages.config,function(f,g){e.push(pages.onPageLoaded(f))});b=$.when.apply($,e);b.done(function(){pages.callPluginPageEventFunctions();a.resolve()});b.fail(function(){a.reject()})});c.fail(function(){a.reject()})}return a.promise()},callPluginPageEventFunctions:function(){var a=$.Deferred();$.each(plugins.pluginNames,function(b,c){app.debug.debug("try to call: plugin_"+c+".pageSpecificEvents()",6);window["plugin_"+c].pageSpecificEvents()});a.resolve();return a.promise()},callPluginsPageFunctions:function(b){var a=$.Deferred();var c=true;$.each(plugins.pluginNames,function(d,e){window["plugin_"+e].afterHtmlInjectedBeforePageComputing(b)});a.resolve();return a.promise()},setEvents:function(){var a=$.Deferred();$(document).on("pagebeforechange",".app-page",function(b){app.debug.trace("pages.js jQuery mobile event: pagebeforechange for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pagebeforechange")});$(document).on("pagebeforecreate",".app-page",function(b){app.debug.trace("jQuery mobile event: pagebeforecreate for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pagebeforecreate");if($(this).attr("data-type")=="static"||$(this).attr("data-type")=="static-inline"){}else{if(window["page_"+$(this).attr("id")]==undefined){alert("-Fatal error: Can't find the page object: page_"+$(this).attr("id")+"; Please have a look to your pages.json file. You'll be redirected to the index.html page.");app.help.navigation.redirect("index.html")}else{}}});$(document).on("pagebeforehide",".app-page",function(b){app.debug.trace("jQuery mobile event: pagebeforehide for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pagebeforehide")});$(document).on("pagebeforeload",".app-page",function(b){app.debug.trace("jQuery mobile event: pagebeforeload for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pagebeforeload")});$(document).on("pagebeforeshow",".app-page",function(b){app.debug.trace("jQuery mobile event: pagebeforeshow for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pagebeforeshow")});$(document).on("pagechange",".app-page",function(b){app.debug.trace("jQuery mobile event: pagechange for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pagechange")});$(document).on("pagechangefailed",".app-page",function(b){app.debug.trace("jQuery mobile event: pagechangefailed for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pagechangefailed")});$(document).on("pagecreate",".app-page",function(b){app.debug.trace("jQuery mobile event: pagecreate for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pagecreate")});$(document).on("pagehide",".app-page",function(b){app.debug.trace("jQuery mobile event: pagehide for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pagehide")});$(document).on("pageinit",".app-page",function(b){app.debug.trace("jQuery mobile event: pageinit for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pageinit")});$(document).on("pageload",".app-page",function(b){app.debug.trace("jQuery mobile event: pageload for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pageload")});$(document).on("pageloadfailed",".app-page",function(b){app.debug.trace("jQuery mobile event: pageloadfailed for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pageloadfailed")});$(document).on("pageremove",".app-page",function(b){app.debug.trace("jQuery mobile event: pageremove for: "+$(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pageremove")});$(document).on("pageshow",".app-page",function(b){app.debug.trace("jQuery mobile event: pageshow for: "+$(this).attr("id"));pages.history.push($(this).attr("id"));pages.eventFunctions.pageTypeSelector(b,$(this),"pageshow")});a.resolve();return a.promise()},eventFunctions:{pageTypeSelector:function(d,a,b){app.debug.trace("plugin.eventFunctions.pageTypeSelector("+d+", "+a+", "+b+")");app.debug.debug("PageId: "+a.attr("id"));if(a.attr("data-type")=="static"){app.debug.debug("case: page type is static");pages.eventFunctions.everyPage[b](d,a);pages.eventFunctions.staticPage[b](d,a)}else{if(a.attr("data-type")=="static-inline"){app.debug.debug("case: page type is inline-static");var c=a.clone();if(a.attr("data-global")==="true"){globalPage[b](d,a)}pages.eventFunctions.everyPage[b](d,a);pages.eventFunctions.staticInlinePage[b](d,a,c)}else{if(window["page_"+a.attr("id")]==undefined){app.debug.debug("case: page ist not defined in pages.json");alert("plugin.eventFunctions.pageTypeSelector() - Fatal error: Can't find the page object: page_"+a.attr("id")+"; Please have a look to your pages.json file.");app.help.navigation.redirect("index.html")}else{app.debug.debug("case: page is a common lapstone page");if(window["page_"+a.attr("id")].config.isGlobalPage==true){globalPage[b](d,a)}else{if(window["page_"+a.attr("id")].config.isGlobalPage==undefined){globalPage[b](d,a)}}pages.eventFunctions.everyPage[b](d,a);pages.eventFunctions.lapstonePage[b](d,a)}}}},everyPage:{pagebeforechange:function(b,a){app.debug.debug("plugin.eventFunctions.everyPage.pagebeforechange("+b+", "+a+")")},pagebeforecreate:function(b,a){app.debug.debug("plugin.eventFunctions.everyPage.pagebeforecreate("+b+", "+a+")")},pagebeforehide:function(b,a){app.debug.debug("plugin.eventFunctions.everyPage.pagebeforehide("+b+", "+a+")");app.debug.debug("plugin.eventFunctions.everyPage.pagehide: clear refresh interval")},pagebeforeload:function(b,a){app.debug.debug("plugin.eventFunctions.everyPage.pagebeforeload("+b+", "+a+")")},pagebeforeshow:function(b,a){app.debug.debug("plugin.eventFunctions.everyPage.pagebeforeshow("+b+", "+a+")");app.debug.debug("plugin.eventFunctions.everyPage.pagebeforeshow: check refresh interval")},pagechange:function(b,a){app.debug.trace("plugin.eventFunctions.everyPage.pagechange("+b+", "+a+")")},pagechangefailed:function(b,a){app.debug.trace("plugin.eventFunctions.everyPage.pagechangefailed("+b+", "+a+")")},pagecreate:function(b,a){app.debug.trace("plugin.eventFunctions.everyPage.pagecreate("+b+", "+a+")")},pagehide:function(b,a){app.debug.trace("plugin.eventFunctions.everyPage.pagehide("+b+", "+a+")");app.debug.debug("plugin.eventFunctions.everyPage.pagehide: clear page specific event delegates");$("#"+a.attr("id")).off();$(document).off("#"+a.attr("id"));app.debug.debug("remove page from DOM: "+a.attr("id"));a.remove()},pageinit:function(b,a){app.debug.trace("plugin.eventFunctions.everyPage.pageinit("+b+", "+a+")")},pageload:function(b,a){app.debug.trace("plugin.eventFunctions.everyPage.pageload("+b+", "+a+")")},pageloadfailed:function(b,a){app.debug.trace("plugin.eventFunctions.everyPage.pageloadfailed("+b+", "+a+")")},pageremove:function(b,a){app.debug.trace("plugin.eventFunctions.everyPage.pageremove("+b+", "+a+")")},pageshow:function(b,a){app.debug.trace("plugin.eventFunctions.everyPage.pageshow("+b+", "+a+")")}},staticPage:{pagebeforechange:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pagebeforechange("+b+", "+a+")")},pagebeforecreate:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pagebeforecreate("+b+", "+a+")");app.debug.debug("do language string replacement");a.find("[data-language]").each(function(c,d){var e=$(this).attr("data-language").split(".");$(this).html(app.lang.string(e[1],e[0]))})},pagebeforehide:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pagebeforehide("+b+", "+a+")")},pagebeforeload:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pagebeforeload("+b+", "+a+")")},pagebeforeshow:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pagechange("+b+", "+a+")")},pagechange:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pagechange("+b+", "+a+")")},pagechangefailed:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pagechangefailed("+b+", "+a+")")},pagecreate:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pagecreate("+b+", "+a+")")},pagehide:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pagehide("+b+", "+a+")")},pageinit:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pageinit("+b+", "+a+")")},pageload:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pageload("+b+", "+a+")")},pageloadfailed:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pageloadfailed("+b+", "+a+")")},pageremove:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pageremove("+b+", "+a+")")},pageshow:function(b,a){app.debug.trace("plugin.eventFunctions.staticPage.pageshow("+b+", "+a+")")}},staticInlinePage:{pagebeforechange:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pagebeforechange("+c+", "+a+")")},pagebeforecreate:function(d,a,c){app.debug.trace("plugin.eventFunctions.staticInlinePage.pagebeforecreate("+d+", "+a+")");app.debug.debug("do language string replacement");c.find("[data-language]").each(function(e,f){var g=$(this).attr("data-language").split(".");$(this).html(app.lang.string(g[1],g[0]))});var b=c.html();a.find("div[data-role=content]").replaceWith(b);pages.callPluginsPageFunctions(a)},pagebeforehide:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pagebeforehide("+c+", "+a+")")},pagebeforeload:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pagebeforeload("+c+", "+a+")")},pagebeforeshow:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pagechange("+c+", "+a+")")},pagechange:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pagechange("+c+", "+a+")")},pagechangefailed:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pagechangefailed("+c+", "+a+")")},pagecreate:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pagecreate("+c+", "+a+")")},pagehide:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pagehide("+c+", "+a+")")},pageinit:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pageinit("+c+", "+a+")")},pageload:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pageload("+c+", "+a+")")},pageloadfailed:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pageloadfailed("+c+", "+a+")")},pageremove:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pageremove("+c+", "+a+")")},pageshow:function(c,a,b){app.debug.trace("plugin.eventFunctions.staticInlinePage.pageshow("+c+", "+a+")")}},lapstonePage:{pagebeforechange:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pagebeforechange("+b+", "+a+")");window["page_"+a.attr("id")].events.pagebeforechange(b,a)},pagebeforecreate:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pagebeforecreate("+b+", "+a+")");if(window["page_"+a.attr("id")].config.loginObligate&&!app.sess.loggedIn()){app.notify.add.alert(app.lang.string("login obligate text","lapstone"),false,app.lang.string("login obligate headline","lapstone"),app.lang.string("login obligate confirm","lapstone"));app.sess.destroyAll();app.help.navigation.redirect(app.config.startPage,"slidefade")}else{if(plugins.config.KeepAlive===true){app.debug.debug("plugin.eventFunctions.lapstonePage.pagebeforecreate() case: : WebServiceClient requires keepAlive");if(window["page_"+a.attr("id")].config.useKeepAlive!=undefined){app.debug.debug("plugin.eventFunctions.lapstonePage.pagebeforecreate() case: Page has keepAlive configuration in page.json");if(window["page_"+a.attr("id")].config.useKeepAlive){app.debug.debug("plugin.eventFunctions.lapstonePage.pagebeforecreate() case: global keepAlive is TRUE");if(app.alive.isAlive()===true){app.debug.debug("plugin.eventFunctions.lapstonePage.pagebeforecreate() case: server isAlive");pages.eventFunctions.lapstonePage.pagebeforecreate_createPage(b,a)}else{app.debug.debug("plugin.eventFunctions.lapstonePage.pagebeforecreate() case: no connection to server");app.debug.debug("Can't load page because keepAlive failed. Check your connection. You'll be redirected to the index.html page.",60);app.alive.badConnectionHandler()}}else{app.debug.debug("plugin.eventFunctions.lapstonePage.pagebeforecreate() case: Page has NO keepAlive entry in page.json file");pages.eventFunctions.lapstonePage.pagebeforecreate_createPage(b,a)}}else{app.debug.debug("plugin.eventFunctions.lapstonePage.pagebeforecreate() case: Page does not require keepAlive");app.debug.debug("No useKeepAlive entry in your page_"+a.attr("id")+".json. Please add it.",60);pages.eventFunctions.lapstonePage.pagebeforecreate_createPage(b,a)}}else{app.debug.debug("plugin.eventFunctions.lapstonePage.pagebeforecreate() case: WebServiceClient does not require keepAlive");pages.eventFunctions.lapstonePage.pagebeforecreate_createPage(b,a)}}},pagebeforecreate_createPage:function(b,a){app.debug.trace("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage()");app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage() - pageId: "+a.attr("id"));var e,d=null,c;window["page_"+a.attr("id")].events.pagebeforecreate(b,a);if(window["page_"+a.attr("id")].include!=undefined){app.debug.trace("pages.js - page has an include array")}else{app.debug.trace("pages.js - page has no include array")}if(window["page_"+a.attr("id")].include_once!=undefined){app.debug.trace("pages.js - page has an include_once array")}else{app.debug.trace("pages.js - page has no include_once array")}if(window["page_"+a.attr("id")].config.template!=undefined){app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage() - case: template != undefined");if(typeof window["page_"+a.attr("id")].config.template=="string"&&window["page_"+a.attr("id")].config.template.length>1){app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage() - case: typeof template == string");app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage() - overwrite template");app.template.overwrite("#"+a.attr("id"),window["page_"+a.attr("id")].config.template);d=app.template.elements(window["page_"+a.attr("id")].config.template);window["page_"+a.attr("id")].elements={};app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage() - set elements");app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage() - html code of page: "+a[0].outerHTML);$.each(d,function(g,f){app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage() - set content from template to: page_"+a.attr("id"));app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage() - set: "+g,20);window["page_"+a.attr("id")].elements[g]=a.find(f)})}}if(window["page_"+a.attr("id")].config.asyncLoading===true){app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage - page IS async");window["page_"+a.attr("id")].async.elements=window["page_"+a.attr("id")].elements;app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage - call: page.async.creator()");e=window["page_"+a.attr("id")].async.creator(a);c=window.setTimeout(function(){app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage - show loader");app.notify.loader.bubbleDiv(true,app.lang.string("text","pageloading"),app.lang.string("headline","pageloading"))},1200);e.done(function(f){if(f){app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage - set: page.async.result: "+JSON.stringify(f));window["page_"+a.attr("id")].async.result=f}else{app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage - set: page.async.result: []");window["page_"+a.attr("id")].async.result=Array()}app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage - call: page.async.done()");window["page_"+a.attr("id")].async.done(a);app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage - enchant page");app.help.jQM.enhance(a)});e.fail(function(f){app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage - set: page.async.result: "+JSON.stringify(f));window["page_"+a.attr("id")].async.result=f;app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage - call: page.async.fail()");window["page_"+a.attr("id")].async.fail(a)});e.always(function(){window.clearTimeout(c);app.notify.loader.remove();app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage - call: page.async.always()");window["page_"+a.attr("id")].async.always(a)})}else{app.debug.debug("pages.eventFunctions.lapstonePage.pagebeforecreate_createPage - page IS NOT async");window["page_"+a.attr("id")].creator(a)}window["page_"+a.attr("id")].setEvents(a);app.debug.debug("Call: pages.callPluginsPageFunctions()");pages.callPluginsPageFunctions(a);app.debug.debug("add data- HTML Attributes");$.each(window["page_"+a.attr("id")].config,function(f,g){a.attr("data-"+f,g)})},pagebeforehide:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pagebeforehide("+b+", "+a+")");window["page_"+a.attr("id")].events.pagebeforehide(b,a);if(pages.refreshInterval!=null){clearInterval(pages.refreshInterval);pages.refreshInterval=null}},pagebeforeload:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pagebeforeload("+b+", "+a+")");window["page_"+a.attr("id")].events.pagebeforeload(b,a)},pagebeforeshow:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pagechange("+b+", "+a+")");window["page_"+a.attr("id")].events.pagebeforeshow(b,a);if(window["page_"+a.attr("id")].config.contentRefresh==true){app.debug.debug("plugin.eventFunctions.everyPage.pagebeforeshow: set refresh interval every "+window["page_"+a.attr("id")].config.contentRefreshInterval+" ms");pages.refreshInterval=window.setInterval(function(){$("div[data-role=content]").children().fadeOut(500).promise().then(function(){$("div[data-role=content]").empty();window["page_"+a.attr("id")].creator(a)})},window["page_"+a.attr("id")].config.contentRefreshInterval)}},pagechange:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pagechange("+b+", "+a+")");window["page_"+a.attr("id")].events.pagechange(b,a)},pagechangefailed:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pagechangefailed("+b+", "+a+")");window["page_"+a.attr("id")].events.pagechangefailed(b,a)},pagecreate:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pagecreate("+b+", "+a+")");window["page_"+a.attr("id")].events.pagecreate(b,a)},pagehide:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pagehide("+b+", "+a+")");window["page_"+a.attr("id")].events.pagehide(b,a)},pageinit:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pageinit("+b+", "+a+")");window["page_"+a.attr("id")].events.pageinit(b,a)},pageload:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pageload("+b+", "+a+")");window["page_"+a.attr("id")].events.pageload(b,a)},pageloadfailed:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pageloadfailed("+b+", "+a+")");window["page_"+a.attr("id")].events.pageloadfailed(b,a)},pageremove:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pageremove("+b+", "+a+")");window["page_"+a.attr("id")].events.pageremove(b,a)},pageshow:function(b,a){app.debug.trace("plugin.eventFunctions.lapstonePage.pageshow("+b+", "+a+")");window["page_"+a.attr("id")].events.pageshow(b,a);if(navigator.splashscreen!=undefined){navigator.splashscreen.hide()}}}}};var config_json={activate_account:true,backup_edit:true,backup_jobs:true,backup_log:true,badConnection:true,create_backup_1_inputAuth:true,create_backup_1_newSource:true,create_backup_1_oAuthFinished:true,create_backup_1:true,create_backup_2_inputAuth:true,create_backup_2_newSink:true,create_backup_2_oAuthFinished:true,create_backup_2:true,create_backup_3:true,create_backup_oAuthHandler:true,index:true,job_details:true,login:true,register_1_terms:true,register_2_name:true,register_3_credentials:true,register_4_final:true,register:true,search:true,settings:true,share_backup:true,start:true,usersettings:true,verify_email:true,zip_archive:true,loginToken:true,friendList:true,startToken:true,timelineSearch:true};