var page_login={config:null,constructor:function(){},creator:function(a){var e=null;try{var f=a.find("div[data-role=header]");var d=a.find("div[data-role=content]");var b=a.find("div#nav-panel");d.append(app.ni.element.h1({text:app.lang.string("login","headlines")}));d.append(app.ni.text.text({id:"txtEmail",placeholder:app.lang.string("email","labels"),label:true,labelText:app.lang.string("email","labels"),container:true}));d.append(app.ni.text.password({id:"txtPassword",placeholder:app.lang.string("password","labels"),label:true,labelText:app.lang.string("password","labels"),container:true}));d.append(app.ni.button.button({id:"btnLogin",placeholder:app.lang.string("login","labels"),label:true,labelText:app.lang.string("login","labels"),container:true,value:app.lang.string("login","actions")}));e=true}catch(c){app.debug.log(JSON.stringify(c,null,4));e=false}return e},setEvents:function(a){var c=null;try{$(a).on("click","#btnLogin",function(){if(!app.help.validate.email(a.find("#txtEmail").val())){app.notify.alert(app.lang.string("bad_email","notifications"),app.lang.string("login","headlines"),app.lang.string("bad_login","headlines"))}else{if(!app.help.validate.password(a.find("#txtPassword").val(),a.find("#txtPasswordRpt").val())){app.notify.alert(app.lang.string("bad_password","notifications"),app.lang.string("login","headlines"),app.lang.string("bad_login","headlines"))}else{if((json=app.rc.getJson("login",{username:a.find("#txtEmail").val(),password:a.find("#txtPassword").val()}))!=false){if(json.type=="success"){app.store.localStorage.clearHtml5();app.store.localStorage.set("data-html5-themis-loggedin",true);app.store.localStorage.set("data-html5-themis-userid",json.userId);app.store.localStorage.set("data-html5-themis-activated",json.activated);app.store.localStorage.set("data-html5-themis-keyring",a.find("#txtPassword").val());app.store.localStorage.set("data-html5-themis-username",a.find("#txtEmail").val());$(location).attr("href","start.html")}else{alert("Benutzername oder Passwort falsch.")}}else{app.notify.alert(app.lang.string("bad_login","notifications"),app.lang.string("login","headlines"),app.lang.string("bad_login","headlines"))}}}});c=true}catch(b){app.debug.log(JSON.stringify(b,null,4));c=false}return c},events:{pagebeforechange:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pagebeforecreate:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pagebeforehide:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pagebeforeload:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pagebeforeshow:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pagechange:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pagechangefailed:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pagecreate:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pagehide:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pageinit:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pageload:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pageloadfailed:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pageremove:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d},pageshow:function(c,a){var d=null;try{d=true}catch(b){app.debug.log(JSON.stringify(b,null,4));d=false}return d}}};
